!function(){"use strict";function e(e){e.forEach((function(e){e.reset(),e.querySelector(".form__submit").classList.add("button_inactive")}))}function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}function n(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,r(o.key),o)}}function r(e){var n=function(e,n){if("object"!=t(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!=t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==t(n)?n:n+""}var o=function(){return e=function e(t,n){var r=t.data,o=t.handleCardClick;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._link=r.link,this._name=r.name,this._cardSelector=n,this._handleCardClick=o,this._likesArray=r.like||{}},(t=[{key:"_getTemplate",value:function(){return document.querySelector(this._cardSelector).content.querySelector(".cards__element").cloneNode("true")}},{key:"_getCurrentUserId",value:function(){return data.getItem("currentUserId")}},{key:"_handleLikeAndDislike",value:function(){this._element.querySelector(".cards__element_itemImage").addEventListener("click",(function(e){var t=e.target,n=document.querySelector(".countlike"),r=perseInt(n.textContent,10);t.classList.contains("cards__like_active")?r-=1:r+=1,t.classList.toggle("cards__like_active"),n.textContent=r}))}},{key:"_handleRemove",value:function(){var e=this,t=document.querySelector(".popup_delete-card"),n=document.querySelector(".form__submit_confirmation");this._element.querySelector(".cards__element_trast").addEventListener("click",(function(){t.classList.toggle("popup_show"),n.addEventListener("click",(function(){e._element.remove(),t.classList.toggle("popup_show"),console.log("¡La terjeta fue eliminada con Éxito!")}))}))}},{key:"_showCard",value:function(){var e=this;this._element.querySelector(".cards__element_image").addEventListener("click",(function(){e._handleCardClick({link:e._link,name:e._name})}))}},{key:"_setEventListeners",value:function(){var e=this;this._handleLikeAndDislike(),this._handleRemove(),this._showCard(),this._imagenElement.addEventListener("click",(function(){e._handleCardClick({link:e._link,name:e._name})}))}},{key:"createNewCard",value:function(){return this._element=this._getTemplate(),this._element.querySelector(".cards__element_itemTitle").textContent=this._name,this._imagenElement=this._element.querySelector(".cards__element_image"),this._imagenElement.src=this._link,this._imagenElement.alt=this._name,this._setEventListeners(),this._element}}])&&n(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,a(r.key),r)}}function u(e,t,n){return(t=a(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e){var t=function(e,t){if("object"!=i(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==i(t)?t:t+""}var l=function(){return e=function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),u(this,"_showInputError",(function(e,t){var n=e.parentElement.querySelector(".form__error");e.classList.add("form__input_type_error"),n.textContent=t,n.classList.add("form__input-error_active")})),u(this,"_hideInputError",(function(e){var t=e.parentElement.querySelector(".form__error");e.classList.remove("form__input_type_error"),t.classList.remove("form__input-error_active"),t.textContent=""})),u(this,"_checkInputValidity",(function(e){e.validity.valid?n._hideInputError(e):n._showInputError(e,e.validationMessage)})),u(this,"_hasInvalidInput",(function(e){return e.some((function(e){return!e.validity.valid}))})),u(this,"_toggleButtonState",(function(e,t){n._hasInvalidInput(e)?t.classList.add("button_inactive"):t.classList.remove("button_inactive")})),u(this,"enableValidation",(function(){n._allForms.forEach((function(e){e.addEventListener("submit",(function(e){e.preventDefault()})),Array.from(document.forms).forEach((function(e){n._setEventListeners(e)}))}))})),this._allForms=t,this.enableValidation()},(t=[{key:"_setEventListeners",value:function(e){var t=this,n=Array.from(e.querySelectorAll(".form__input")),r=e.querySelector(".form__submit");n.forEach((function(e){e.addEventListener("input",(function(){t._checkInputValidity(e),t._toggleButtonState(n,r)}))}))}}])&&c(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}(),s=l;function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,y(r.key),r)}}function y(e){var t=function(e,t){if("object"!=f(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=f(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==f(t)?t:t+""}var m=function(){return e=function e(t){var n,r,o,i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),n=this,o=function(e){"Escape"===e.key&&i.close()},(r=y(r="_handleEscClose"))in n?Object.defineProperty(n,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[r]=o,this._popupSelector=t,this._popupElement=document.querySelector(this._popupSelector),this._handleEscClose=this._handleEscClose.bind(this)},(t=[{key:"open",value:function(){this._popupElement.classList.add("popup_show"),document.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){this._popupElement.classList.remove("popup_show"),document.removeEventListener("keydown",this._handleEscClose)}},{key:"setEventListeners",value:function(){var e=this,t=this._popupElement.querySelector(".popup__close-button"),n=this._popupElement.querySelectorAll(".popup__overlay");t.addEventListener("click",(function(){e.close()})),n.forEach((function(t){t.addEventListener("click",(function(){e.close()}))})),document.addEventListener("keydown",this._handleEscClose)}}])&&p(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,b(r.key),r)}}function b(e){var t=function(e,t){if("object"!=d(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=d(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==d(t)?t:t+""}function _(e,t,n){return t=E(t),function(e,t){if(t&&("object"===d(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,h()?Reflect.construct(t,n||[],E(e).constructor):t.apply(e,n))}function h(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(h=function(){return!!e})()}function S(){return S="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=E(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},S.apply(this,arguments)}function E(e){return E=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},E(e)}function g(e,t){return g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},g(e,t)}var w=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=_(this,t,[e]))._submitButton=n,r._form=document.querySelector(e).querySelector(".form"),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g(e,t)}(t,e),n=t,(r=[{key:"_getInputValues",value:function(){var e={};return this._form.querySelectorAll(".form__input").forEach((function(t){t.name&&(e[t.name]=t.value)})),e}},{key:"close",value:function(){this._form.reset(),S(E(t.prototype),"close",this).call(this)}},{key:"setEventListeners",value:function(){var e=this;S(E(t.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",(function(t){t.preventDefault();var n=e._getInputValues();e._submitButton(n),e.close()}));var n=this._form.querySelector(this._closeButonSelector);n&&n.addEventListener("click",(function(t){t.preventDefault(),e.close()}))}}])&&v(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(m);function k(e){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},k(e)}function j(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,O(r.key),r)}}function O(e){var t=function(e,t){if("object"!=k(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=k(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==k(t)?t:t+""}function L(e,t,n){return t=q(t),function(e,t){if(t&&("object"===k(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,C()?Reflect.construct(t,n||[],q(e).constructor):t.apply(e,n))}function C(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(C=function(){return!!e})()}function P(){return P="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=q(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},P.apply(this,arguments)}function q(e){return q=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},q(e)}function T(e,t){return T=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},T(e,t)}var I=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),L(this,t,[e])}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&T(e,t)}(t,e),n=t,(r=[{key:"open",value:function(e,n){var r=document.querySelector(this._popupSelector);this._image=r.querySelector("#popup__image"),this._description=r.querySelector(".popup__title"),this._image&&this._description?(this._image.src=e,this._image.alt=n,this._description.textContent=n,P(q(t.prototype),"open",this).call(this)):alert("Elemento de imagen o descripcion no encontradas")}}])&&j(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(m);function x(e){return x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},x(e)}function R(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,A(r.key),r)}}function A(e){var t=function(e,t){if("object"!=x(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=x(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==x(t)?t:t+""}var D=function(){return e=function e(t){var n=t.nameSelector,r=t.jobSelector;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._nameElement=document.querySelector(n),this._jobElement=document.querySelector(r)},(t=[{key:"getUserInfo",value:function(){return{name:this._nameElement.textContent,job:this._jobElement.textContent}}},{key:"setUserInfo",value:function(e){var t=e.name,n=e.job;this._nameElement.textContent=t,this._jobElement.textContent=n}}])&&R(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function B(e){return B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},B(e)}function U(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,V(r.key),r)}}function V(e){var t=function(e,t){if("object"!=B(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=B(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==B(t)?t:t+""}new(function(){return e=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._url=t,this._token=n},(t=[{key:"getUserInfo",value:function(){return fetch("".concat(this._url,"/users/me"),{method:"GET",headers:{Authorization:"678fbd92-e6e4-4044-b047-74ce334ffd4e"}}).then((function(e){return e.json()})).then((function(e){console.log(e)})).catch((function(e){console.log("Error:",e)}))}},{key:"getInitialCard",value:function(){return fetch("".concat(this._url,"/cards"),{method:"GET",headers:{Authorization:"678fbd92-e6e4-4044-b047-74ce334ffd4e"}}).then((function(e){return e.json()})).then((function(e){console.log(e)})).catch((function(e){console.log("Error:",e)}))}},{key:"updateUser",value:function(){}},{key:"addCard",value:function(){}},{key:"deleteCard",value:function(){}},{key:"linkCard",value:function(){}},{key:"deleteCardLink",value:function(){}}])&&U(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}())("https://around.nomoreparties.co/v1/web_es_11","678fbd92-e6e4-4044-b047-74ce334ffd4e");var N=document.querySelectorAll(".form"),z=(document.querySelector(".popup"),document.querySelector(".buttons__item_index_profile")),F=document.querySelector(".buttons__item_index_add-card"),G=(document.querySelectorAll(".popup__overlay"),document.querySelectorAll(".form__error"),document.querySelector(".popup__close-button"),document.querySelector(".cards__element_item-imagen"),document.querySelector(".cards__element_trast")),M=document.querySelector(".buttons__edit");document.querySelector(".cards"),document.addEventListener("DOMContentLoaded",(function(){var t=new I(".popup_content-image");t.setEventListeners();var n=function(e){t.open(e.link,e.name)},r=new D({nameSelector:".buttons__name",jobSelector:".buttons__explorer"}),i=new w(".popup_edit-profile",(function(t){r.setUserInfo({name:t.name,job:t.activity}),i.close(),e(N)}));i.setEventListeners(),z.addEventListener("click",(function(){i.open()}));var c=new w(".popup_content-addcard",(function(t){var r=function(e){return new o({data:e,handleCardClick:n,handleDeleteClick:function(e){currentCard=e,popupDeleteCofirmation.open(e)}},"#newElement").createNewCard()}({name:t.newplace,link:t.enlace});document.querySelector(".cards").prepend(r),c.close(),e(N)}));c.setEventListeners(),F.addEventListener("click",(function(){c.open()}));var u=new w(".popup_avatar",(function(e){}));u.setEventListeners(),M.addEventListener("click",(function(){u.open()}));var a=new w(".popup_delete-card",(function(e){}));a.setEventListeners(),G.addEventListener("click",(function(){a.open()})),new s(N).enableValidation()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFTcEIsY0FBYyxVQUFVd0osUUFBUVQsR0FDekNELEVBQXdCOUQsUUFDeEJyRixFQUFXeUQsRUFDZixJQUNBMEYsRUFBd0JOLG9CQUd4QkosRUFBYzNHLGlCQUFpQixTQUFTLFdBQ3BDcUgsRUFBd0JMLE1BQzVCLElBRUEsSUFBTWdCLEVBQXNCLElBQUloRSxFRHRHWixpQkNzRzJDLFNBQUNhLEdBQWUsSUFDL0VtRCxFQUFvQmpCLG9CQUNwQkYsRUFBaUI3RyxpQkFBaUIsU0FBUyxXQUN2Q2dJLEVBQW9CaEIsTUFDeEIsSUFFQSxJQUFNaUIsRUFBK0IsSUFBSWpFLEVEN0diLHNCQzZHb0QsU0FBQ2EsR0FBZSxJQUNoR29ELEVBQTZCbEIsb0JBQzdCSCxFQUFjNUcsaUJBQWlCLFNBQVMsV0FDcENpSSxFQUE2QmpCLE1BQ2pDLElBSW1CLElBQUl0RixFQUFjQyxHQUMxQnNCLGtCQUVmLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9zcmMvdXRpbHMvdXRpbHMuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0X2Fyb3VuZC8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0X2Fyb3VuZC8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vc3JjL2NvbXBvbmVudHMvQXBpcy5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0X2Fyb3VuZC8uL3NyYy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBGdW5jacOzbiBxdWUgbm9zIHBlcm1pdGUgcmVzZXRlYXIgbG9zIGZvcm11bGFyaW9zIHkgdGFtYmnDqW5cclxuZnVuY3Rpb24gcmVzZXRGb3Jtcyhmb3Jtcykge1xyXG4gICAgZm9ybXMuZm9yRWFjaCgoZm9ybSkgPT4ge1xyXG4gICAgICAgIC8vIFJlc2V0ZWEgY2FkYSBlbnRyYWRhIGRlIGxvcyBmb3JtdWxhcmlvcyBwYXJhIGVsaW1pbmFyIGxvcyBkYXRvcyBxdWUgcXVlZGFuXHJcbiAgICAgICAgZm9ybS5yZXNldCgpO1xyXG4gICAgICAgIGZvcm0ucXVlcnlTZWxlY3RvcihcIi5mb3JtX19zdWJtaXRcIikuY2xhc3NMaXN0LmFkZChcImJ1dHRvbl9pbmFjdGl2ZVwiKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5leHBvcnQgeyByZXNldEZvcm1zIH07XHJcbiIsImNsYXNzIENhcmQge1xyXG4gICAgY29uc3RydWN0b3IoeyBkYXRhLCBoYW5kbGVDYXJkQ2xpY2sgfSwgY2FyZFNlbGVjdG9yKSB7XHJcbiAgICAgICAgdGhpcy5fbGluayA9IGRhdGEubGluaztcclxuICAgICAgICB0aGlzLl9uYW1lID0gZGF0YS5uYW1lO1xyXG4gICAgICAgIHRoaXMuX2NhcmRTZWxlY3RvciA9IGNhcmRTZWxlY3RvcjtcclxuICAgICAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sgPSBoYW5kbGVDYXJkQ2xpY2s7XHJcbiAgICAgICAgdGhpcy5fbGlrZXNBcnJheSA9IGRhdGEubGlrZSB8fCB7fTtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgX2dldFRlbXBsYXRlKCkge1xyXG4gICAgICAgIGNvbnN0IG5ld0VsZW1udCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fY2FyZFNlbGVjdG9yKS5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZHNfX2VsZW1lbnRcIilcclxuICAgICAgICAgICAgLmNsb25lTm9kZShcInRydWVcIik7XHJcblxyXG4gICAgICAgIHJldHVybiBuZXdFbGVtbnQ7XHJcbiAgICB9XHJcblxyXG4gICAgX2dldEN1cnJlbnRVc2VySWQoKSB7XHJcbiAgICAgICAgcmV0dXJuIGRhdGEuZ2V0SXRlbShcImN1cnJlbnRVc2VySWRcIik7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gX2lzTGlrZWQoKSB7XHJcbiAgICAvLyAgICAgcmV0dXJuIHRoaXMuX2xpa2VzQXJyYXkuaW5jbHVkZXModGhpcy5fZ2V0Q3VycmVudFVzZXJJZCgpKTtcclxuICAgIC8vIH1cclxuXHJcbiAgICAvLyBfdXBkYXRlTGlrZVN0YXR1cygpIHtcclxuICAgIC8vICAgICBjb25zdCBsaWtlQnV0dG9uID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRzX19lbGVtZW50X2l0ZW1JbWFnZVwiKTtcclxuICAgIC8vICAgICBjb25zdCBsaWtlQ291bnQgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY291bnRsaWtlXCIpO1xyXG5cclxuICAgIC8vICAgICBpZiAodGhpcy5faXNMaWtlZCgpKSB7XHJcbiAgICAvLyAgICAgICAgIGxpa2VCdXR0b24uY2xhc3NMaXN0LmFkZChcImNhcmRzX19saWtlX2FjdGl2ZVwiKTtcclxuICAgIC8vICAgICB9IGVsc2Uge1xyXG4gICAgLy8gICAgICAgICBsaWtlQnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoXCJjYXJkc19fbGlrZV9hY3RpdmVcIik7XHJcbiAgICAvLyAgICAgfVxyXG5cclxuICAgIC8vICAgICBsaWtlQ291bnQudGV4dENvbnRlbnQgPSB0aGlzLl9saWtlc0FycmF5Lmxlbmd0aDtcclxuICAgIC8vIH1cclxuXHJcbiAgICBfaGFuZGxlTGlrZUFuZERpc2xpa2UoKSB7XHJcblxyXG4gICAgICAgIC8vQSBsYSB0YXJqZXRhIGNyZWFkYSBzZSBsZSBkYSBlbCBFdmVudG8gQ2xpY2sgcXVlIGFjdGl2YSBvIGRlc2FjdGl2YSBlbCBib3RvbiBkZSBtZSBndXN0YSBzaSBlbCB1c3VhcmlvIGxvIHNlbGVjY2lvbmFcclxuICAgICAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZHNfX2VsZW1lbnRfaXRlbUltYWdlXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgICAgICAgICAgLy8gZXZlbnQudGFyZ2V0LmNsYXNzTGlzdC50b2dnbGUoXCJjYXJkc19fbGlrZV9hY3RpdmVcIilcclxuICAgICAgICAgICAgY29uc3QgbGlrZUJ1dHRvbiA9IGV2ZW50LnRhcmdldDtcclxuICAgICAgICAgICAgY29uc3QgY291bnRMaWtlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jb3VudGxpa2VcIik7XHJcbiAgICAgICAgICAgIGxldCBsaWtlQ291bnQgPSBwZXJzZUludChjb3VudExpa2UudGV4dENvbnRlbnQsIDEwKVxyXG5cclxuICAgICAgICAgICAgaWYgKGxpa2VCdXR0b24uY2xhc3NMaXN0LmNvbnRhaW5zKFwiY2FyZHNfX2xpa2VfYWN0aXZlXCIpKSB7XHJcbiAgICAgICAgICAgICAgICBsaWtlQ291bnQgLT0gMTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGxpa2VDb3VudCArPSAxO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBsaWtlQnV0dG9uLmNsYXNzTGlzdC50b2dnbGUoXCJjYXJkc19fbGlrZV9hY3RpdmVcIilcclxuXHJcbiAgICAgICAgICAgIGNvdW50TGlrZS50ZXh0Q29udGVudCA9IGxpa2VDb3VudDtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gY29uc3QgbGlrZUJ1dHRvbiA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkc19fZWxlbWVudF9pdGVtSW1hZ2VcIik7XHJcblxyXG4gICAgICAgIC8vIGxpa2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICAvLyAgICAgY29uc3QgdXNlcklkZSA9IHRoaXMuX2dldEN1cnJlbnRVc2VySWQoKTtcclxuICAgICAgICAvLyAgICAgaWYgKHRoaXMuX2lzTGlrZWQoKSkge1xyXG4gICAgICAgIC8vICAgICAgICAgdGhpcy5fbGlrZXNBcnJheSA9IHRoaXMuX2xpa2VzQXJyYXkuZmlsdGVyKGlkID0+IGlkICE9PSB1c2VySWRlKVxyXG4gICAgICAgIC8vICAgICB9IGVsc2Uge1xyXG4gICAgICAgIC8vICAgICAgICAgdGhpcy5fbGlrZXNBcnJheS5wdXNoKHVzZXJJZGUpXHJcbiAgICAgICAgLy8gICAgIH1cclxuICAgICAgICAvLyAgICAgdGhpcy5fdXBkYXRlTGlrZVN0YXR1cygpO1xyXG4gICAgICAgIC8vICAgICBjb25zb2xlLmxvZyhcIkhPTEEgSEFTIERBRE8gTElLRSBBIExBIFRBUkpFVEFcIilcclxuICAgICAgICAvLyB9KTtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgX2hhbmRsZVJlbW92ZSgpIHtcclxuICAgICAgICBjb25zdCBkZWxldGVDb25maXJtYXRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX2RlbGV0ZS1jYXJkXCIpXHJcbiAgICAgICAgY29uc3QgY29uZmlybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybV9fc3VibWl0X2NvbmZpcm1hdGlvblwiKTtcclxuXHJcbiAgICAgICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRzX19lbGVtZW50X3RyYXN0XCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcblxyXG4gICAgICAgICAgICBkZWxldGVDb25maXJtYXRpb24uY2xhc3NMaXN0LnRvZ2dsZShcInBvcHVwX3Nob3dcIik7XHJcbiAgICAgICAgICAgIGNvbmZpcm0uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2VsZW1lbnQucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgICBkZWxldGVDb25maXJtYXRpb24uY2xhc3NMaXN0LnRvZ2dsZShcInBvcHVwX3Nob3dcIik7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIsKhTGEgdGVyamV0YSBmdWUgZWxpbWluYWRhIGNvbiDDiXhpdG8hXCIpXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIF9zaG93Q2FyZCgpIHtcclxuICAgICAgICAvL0EgbGEgdGFyamV0YSBjcmVhZGEgc2UgbGUgZGEgZWwgZXZlbnRvIGNsaWNrIHF1ZSBub3MgcGVybWl0ZSBtb3N0cmFyIGxhIHRhcmpldGEgZW4gbGEgcGFudGFsbGEgdW5hIHZleiBxdWUgZWwgdXN1YXJpbyBsYSBzZWxlY2Npb25lXHJcbiAgICAgICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRzX19lbGVtZW50X2ltYWdlXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayh7IGxpbms6IHRoaXMuX2xpbmssIG5hbWU6IHRoaXMuX25hbWUgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgICAgICB0aGlzLl9oYW5kbGVMaWtlQW5kRGlzbGlrZSgpO1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZVJlbW92ZSgpO1xyXG4gICAgICAgIHRoaXMuX3Nob3dDYXJkKCk7XHJcbiAgICAgICAgdGhpcy5faW1hZ2VuRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2soeyBsaW5rOiB0aGlzLl9saW5rLCBuYW1lOiB0aGlzLl9uYW1lIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vVXRpbGl6YSBsYSBwbGFudGlsbGEgY29sb2NhZGEgZW4gaHRtbCBwYXJhIGNyZWFyIGxhIG51ZXZhIHRhcmpldGEgaW5ncmVzYWRhIHBvciBlbCB1c3VhcmlvXHJcbiAgICBjcmVhdGVOZXdDYXJkKCkge1xyXG4gICAgICAgIHRoaXMuX2VsZW1lbnQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xyXG4gICAgICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkc19fZWxlbWVudF9pdGVtVGl0bGVcIikudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xyXG4gICAgICAgIHRoaXMuX2ltYWdlbkVsZW1lbnQgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZHNfX2VsZW1lbnRfaW1hZ2VcIik7XHJcbiAgICAgICAgdGhpcy5faW1hZ2VuRWxlbWVudC5zcmMgPSB0aGlzLl9saW5rO1xyXG4gICAgICAgIHRoaXMuX2ltYWdlbkVsZW1lbnQuYWx0ID0gdGhpcy5fbmFtZTtcclxuICAgICAgICAvLyB0aGlzLl91cGRhdGVMaWtlU3RhdHVzKClcclxuICAgICAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcy5fZWxlbWVudDtcclxuICAgIH1cclxuXHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IENhcmQ7XHJcbiIsImNsYXNzIEZvcm1WYWxpZGF0b3IgeyAgICBjb25zdHJ1Y3RvcihhbGxGb3Jtcykge1xyXG4gICAgICAgIHRoaXMuX2FsbEZvcm1zID0gYWxsRm9ybXM7XHJcbiAgICAgICAgdGhpcy5lbmFibGVWYWxpZGF0aW9uKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLy9GdW5jacOzbiBwYXJhIG1vc3RyYXIgZWwgbWVuc2FqZSBkZSBlcnJvciBjdWFuZG8gZWwgdXN1YXJpbyBpbnRyb2R1Y2UgZGF0b3MgZXJyb25lb3MgZW4gbG9zIGNhbXBvc1xyXG4gICAgX3Nob3dJbnB1dEVycm9yID0gKGlucHV0RWxlbWVudCwgZXJyb3JNZXNzYWdlKSA9PiB7XHJcbiAgICAgICAgY29uc3QgZXJyb3JFbGVtZW50ID1cclxuICAgICAgICAgICAgaW5wdXRFbGVtZW50LnBhcmVudEVsZW1lbnQucXVlcnlTZWxlY3RvcihgLmZvcm1fX2Vycm9yYCk7XHJcbiAgICAgICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJmb3JtX19pbnB1dF90eXBlX2Vycm9yXCIpO1xyXG4gICAgICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGVycm9yTWVzc2FnZTtcclxuICAgICAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImZvcm1fX2lucHV0LWVycm9yX2FjdGl2ZVwiKTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gRnVuY2nDs24gcGFyYSBvY3VsdGFyIGVsIG1lbnNhamUgZGUgZXJyb3IgY3VhbmRvIGVsIHVzdWFyaW8gcG9uZ2EgdG9kb3MgbG9zIGRhdG9zIHJlcXVlcmlkb3NcclxuICAgIF9oaWRlSW5wdXRFcnJvciA9IChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgICBjb25zdCBlcnJvckVsZW1lbnQgPVxyXG4gICAgICAgICAgICBpbnB1dEVsZW1lbnQucGFyZW50RWxlbWVudC5xdWVyeVNlbGVjdG9yKGAuZm9ybV9fZXJyb3JgKTtcclxuICAgICAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcImZvcm1fX2lucHV0X3R5cGVfZXJyb3JcIik7XHJcbiAgICAgICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJmb3JtX19pbnB1dC1lcnJvcl9hY3RpdmVcIik7XHJcbiAgICAgICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gXCJcIjtcclxuICAgIH07XHJcblxyXG4gICAgLy9Fc3RhIGZ1bmNpw7NuIHJldmlzYSBzaSBlbCBpbnB1dCBlcyB2w6FsaWRvIG8gbm8geSBkZXBlbmRpZW5kbyBkZSBlc3RvIGFjdGl2YSBvIGRlc2FjdGl2YSBlbCBib3RvbiBndWFyZGFyXHJcbiAgICBfY2hlY2tJbnB1dFZhbGlkaXR5ID0gKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICAgIGlmICghaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCwgaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgLy9Fc3RhIGZ1bmNpw7NuIGRldnVlbHZlIHRydWUgc2kgYWxtZW5vcyBoYXkgdW4gaW5wdXQgbm8gdsOhbGlkbyBlbiBlbCBhcnJheVxyXG4gICAgX2hhc0ludmFsaWRJbnB1dCA9IChpbnB1dExpc3QpID0+IHtcclxuICAgICAgICByZXR1cm4gaW5wdXRMaXN0LnNvbWUoKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZDtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgLy9Fc3RhIGZ1bmNpw7NuIG5vcyB2ZXJpZmljYSBzaSBhbGd1bm8gZGUgbG9zIGNhbXBvcyBlcyB2w6FsaWRvIHkgZGVwZW5kaWVuZG8gZGUgZXN0byBhY3RpdmEgbyBkZXNhY3RpdmEgZWwgYm90b24gZ3VhcmRhclxyXG4gICAgX3RvZ2dsZUJ1dHRvblN0YXRlID0gKGlucHV0TGlzdCwgYnV0dG9uRWxlbWVudCkgPT4ge1xyXG4gICAgICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQoaW5wdXRMaXN0KSkge1xyXG4gICAgICAgICAgICBidXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJidXR0b25faW5hY3RpdmVcIik7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwiYnV0dG9uX2luYWN0aXZlXCIpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgLy9Fc3RhIGZ1bmNpw7NuIGNyZWEgdW5hIGxpc3RhIGRlIHRvZG9zIGxvcyBpbnB1cyB5IGRlIHRvZG9zIGxvcyBib3RvbmVzLiBMdWVnbyBpdGVyYSBzb2JyZSBlc3RvcyBjYW1wb3MgbGxhbWFuZG8gYSBsYXMgZnVuY2lvbmVzIGFudGVyaW9yZXNcclxuXHJcbiAgICBfc2V0RXZlbnRMaXN0ZW5lcnMoZm9ybUVsZW1lbnQpIHtcclxuICAgICAgICBjb25zdCBpbnB1dExpc3QgPSBBcnJheS5mcm9tKFxyXG4gICAgICAgICAgICBmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmZvcm1fX2lucHV0XCIpXHJcbiAgICAgICAgKTtcclxuICAgICAgICBjb25zdCBidXR0b25FbGVtZW50ID0gZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb3JtX19zdWJtaXRcIik7XHJcbiAgICAgICAgaW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICAgICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoaW5wdXRMaXN0LCBidXR0b25FbGVtZW50KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy9Fc3RhIGZ1bmNpw7NuIGxsYW1hIGEgbGEgYW50ZXJpb3JcclxuICAgIGVuYWJsZVZhbGlkYXRpb24gPSAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5fYWxsRm9ybXMuZm9yRWFjaCgoZm9ybUVsZW1lbnQpID0+IHtcclxuICAgICAgICAgICAgZm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCBmdW5jdGlvbiAoZXZ0KSB7XHJcbiAgICAgICAgICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGNvbnN0IGZpZWxkc2V0TGlzdCA9IEFycmF5LmZyb20oZG9jdW1lbnQuZm9ybXMpO1xyXG4gICAgICAgICAgICBmaWVsZHNldExpc3QuZm9yRWFjaCgoZmllbGRzZXQpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKGZpZWxkc2V0KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBGb3JtVmFsaWRhdG9yO1xyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XHJcbiAgICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICAgICAgLy9SZWNpYmUgdW4gc2VsZWN0b3IgcG9wdXBcclxuICAgICAgICB0aGlzLl9wb3B1cFNlbGVjdG9yID0gcG9wdXBTZWxlY3RvcjtcclxuICAgICAgICB0aGlzLl9wb3B1cEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX3BvcHVwU2VsZWN0b3IpO1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZUVzY0Nsb3NlID0gdGhpcy5faGFuZGxlRXNjQ2xvc2UuYmluZCh0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICAvL03DqXRvZG8gcMO6YmxpY28gcGFyYSBhYnJpciBlbCBwb3B1cCBvIGxhIGltYWdlbiBzZWxlY2Npb25hZGFcclxuICAgIG9wZW4oKSB7XHJcbiAgICAgICAgLy9BYnJpcsOhIGVsIHBvcHVwXHJcbiAgICAgICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJwb3B1cF9zaG93XCIpO1xyXG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICAgIH1cclxuXHJcbiAgICAvL03DqXRvZG8gcMO6YmxpY28gcGFyYSBjZXJyYXIgZWwgcG9wdXAgbyBsYSBpbWFnZW4gc2VsZWNjaW9uYWRhXHJcbiAgICBjbG9zZSgpIHtcclxuICAgICAgICAvL0NlcnJhciBlbCBwb3B1cFxyXG4gICAgICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwicG9wdXBfc2hvd1wiKTtcclxuICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy9Nw6l0b2RvIHByaXZhZG8gcGFyYSBjZXJyYXIgZWwgcG9wdXAgYWwgcHVsc2FyIGxhIHRlY2xhIEVzY1xyXG4gICAgX2hhbmRsZUVzY0Nsb3NlID0gKGV2dCkgPT4ge1xyXG4gICAgICAgIGlmIChldnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIC8vTcOpdG9kbyBww7pibGljbyBwYXJhIGFncmVnYXIgZXZlbnRvcyBkZSBjbGljIGFsIGljb25vIGNlcnJhciB5IGVsIMOhcmVhIHNvbWJyZWFkYVxyXG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICAgICAgY29uc3QgY2xvc2VCdXR0b24gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgICAgICAgXCIucG9wdXBfX2Nsb3NlLWJ1dHRvblwiXHJcbiAgICAgICAgKTtcclxuICAgICAgICBjb25zdCBhbGxPdmVybGF5ID1cclxuICAgICAgICAgICAgdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIucG9wdXBfX292ZXJsYXlcIik7XHJcbiAgICAgICAgLy8gY29uc3QgcG9wdXBTaG93ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9wb3B1cFNlbGVjdG9yKTtcclxuXHJcbiAgICAgICAgY2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBhbGxPdmVybGF5LmZvckVhY2goKG92ZXJsYXkpID0+IHtcclxuICAgICAgICAgICAgLy9DZXJyYXIgbGEgaW1hZ2VuIHBvcHVwIGFsIGRhciBjbGljIGVuIGVsIE92ZXJsYXlcclxuICAgICAgICAgICAgb3ZlcmxheS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpOyAvL0NlcnJhciBhbCBwcmVzaW9uYXIgbGEgdGVjbGEgRXNjXHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xyXG4gICAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvciwgc3VibWlDYWxsYmFjaykge1xyXG4gICAgICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbiA9IHN1Ym1pQ2FsbGJhY2s7XHJcbiAgICAgICAgdGhpcy5fZm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3RvcikucXVlcnlTZWxlY3RvcihcIi5mb3JtXCIpO1xyXG4gICAgfVxyXG5cclxuICAgIF9nZXRJbnB1dFZhbHVlcygpIHtcclxuICAgICAgICAvL23DqXRvZG8gcGFyYSBhbG1hY2VuYXIgbG9zIHZhbG9yZXMgZGUgdG9kb3MgbG9zIGNhbXBvcyBkZSBlbnRyYWRhXHJcbiAgICAgICAgY29uc3QgdmFsdWVzSW1wdXQgPSB7fTsgLy9PYmpldG8gcGFyYSBhbG1hY2VuYXIgdG9kb3MgbG9zIHZhbG9yZXMgZGUgbG9zIGNhbXBvcyBkZSBlbnRyYWRhXHJcbiAgICAgICAgY29uc3QgYWxsSW5wdXQgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoXCIuZm9ybV9faW5wdXRcIik7XHJcblxyXG4gICAgICAgIGFsbElucHV0LmZvckVhY2goKGl0ZW0pID0+IHtcclxuICAgICAgICAgICAgaWYgKGl0ZW0ubmFtZSkge1xyXG4gICAgICAgICAgICAgICAgdmFsdWVzSW1wdXRbaXRlbS5uYW1lXSA9IGl0ZW0udmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gdmFsdWVzSW1wdXQ7XHJcbiAgICB9XHJcbiAgICBjbG9zZSgpIHtcclxuICAgICAgICB0aGlzLl9mb3JtLnJlc2V0KCk7IC8vIFJlaW5pY2lhciBlbCBmb3JtdWxhcmlvIGFsIGNlcnJhciBlbCBwb3B1cFxyXG4gICAgICAgIHN1cGVyLmNsb3NlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICAgICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgICAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xyXG4gICAgICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgY29uc3QgZm9ybURhdGEgPSB0aGlzLl9nZXRJbnB1dFZhbHVlcygpO1xyXG4gICAgICAgICAgICB0aGlzLl9zdWJtaXRCdXR0b24oZm9ybURhdGEpO1xyXG4gICAgICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGNvbnN0IGNsb3NlQnV0dG9uID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKHRoaXMuX2Nsb3NlQnV0b25TZWxlY3Rvcik7XHJcbiAgICAgICAgaWYgKGNsb3NlQnV0dG9uKSB7XHJcbiAgICAgICAgICAgIGNsb3NlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZ0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiOy8vRXN0YSBjbGFzZSBsbyBxdWUgbm9zIHBlcm1pdGlyw6EgZXMgcXVlIGFsIG1vbWVudG8gZGUgZGFybGUgY2xpY2sgYSB1bmEgZGUgbGFzIGltw6FnZW5lcyBkZSBudWVzdHJhIHDDoWdpbmEsIGVzdGUgc2UgbW9zdHJhcsOhIGVuIGxhIHZlbnRhbmEsIHkgYWRlbWFzIHRlbmRyw6EgdW4gZGVzY3JpcGNpw7NuIGNvcnRhIGVuIGxhIHBhcnRlIGluZmVyaW9yIGRlIGxhIG1pc3RtYS5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICAgICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB9XHJcblxyXG4gICAgb3BlbihsaW5rLCBuYW1lKSB7XHJcbiAgICAgICAgY29uc3QgcG9wdXBFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9wb3B1cFNlbGVjdG9yKTtcclxuICAgICAgICB0aGlzLl9pbWFnZSA9IHBvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiI3BvcHVwX19pbWFnZVwiKTtcclxuICAgICAgICB0aGlzLl9kZXNjcmlwdGlvbiA9IHBvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX190aXRsZVwiKTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuX2ltYWdlICYmIHRoaXMuX2Rlc2NyaXB0aW9uKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2ltYWdlLnNyYyA9IGxpbms7XHJcbiAgICAgICAgICAgIHRoaXMuX2ltYWdlLmFsdCA9IG5hbWU7XHJcbiAgICAgICAgICAgIHRoaXMuX2Rlc2NyaXB0aW9uLnRleHRDb250ZW50ID0gbmFtZTtcclxuICAgICAgICAgICAgc3VwZXIub3BlbigpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGFsZXJ0KFwiRWxlbWVudG8gZGUgaW1hZ2VuIG8gZGVzY3JpcGNpb24gbm8gZW5jb250cmFkYXNcIik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHsgICAgLy9FcyBjYXBheiBkZSBwcmVzZW50YXIgaW5mb3JtYWNpw7NuIHNvYnJlIGVsIHVzdWFyaW8gZW4gbGEgcMOhZ2luYVxyXG4gICAgY29uc3RydWN0b3IoeyBuYW1lU2VsZWN0b3IsIGpvYlNlbGVjdG9yIH0pIHtcclxuICAgICAgICB0aGlzLl9uYW1lRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IobmFtZVNlbGVjdG9yKTtcclxuICAgICAgICB0aGlzLl9qb2JFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihqb2JTZWxlY3Rvcik7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gTcOpdG9kbyBww7pibGljbyBwYXJhIG9idGVuZXIgaW5mb3JtYWNpw7NuIHNvYnJlIGVsIHVzdWFyaW9cclxuICAgIGdldFVzZXJJbmZvKCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIG5hbWU6IHRoaXMuX25hbWVFbGVtZW50LnRleHRDb250ZW50LFxyXG4gICAgICAgICAgICBqb2I6IHRoaXMuX2pvYkVsZW1lbnQudGV4dENvbnRlbnQsXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBNw6l0b2RvIHDDumJsaWNvIHBhcmEgZXN0YWJsZWNlciBpbmZvcm1hY2nDs24gc29icmUgZWwgdXN1YXJpb1xyXG4gICAgc2V0VXNlckluZm8oeyBuYW1lLCBqb2IgfSkge1xyXG4gICAgICAgIHRoaXMuX25hbWVFbGVtZW50LnRleHRDb250ZW50ID0gbmFtZTtcclxuICAgICAgICB0aGlzLl9qb2JFbGVtZW50LnRleHRDb250ZW50ID0gam9iO1xyXG4gICAgfVxyXG59XHJcbiIsIi8qKlxyXG4gVE9LRU4gOiA2NzhmYmQ5Mi1lNmU0LTQwNDQtYjA0Ny03NGNlMzM0ZmZkNGVcclxuIEdSVVBPOiB3ZWJfZXNfMTFcclxuIFVSTCA6IGh0dHBzOi8vYXJvdW5kLm5vbW9yZXBhcnRpZXMuY28vdjEvd2ViX2VzXzExL2NhcmRzXHJcbiAqL1xyXG5cclxuY2xhc3MgQXBpIHtcclxuICAgIGNvbnN0cnVjdG9yKHVybCwgdG9rZW4pIHtcclxuICAgICAgICB0aGlzLl91cmwgPSB1cmw7XHJcbiAgICAgICAgdGhpcy5fdG9rZW4gPSB0b2tlbjtcclxuICAgIH07XHJcblxyXG5cclxuICAgIGdldFVzZXJJbmZvKCkge1xyXG4gICAgICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9L3VzZXJzL21lYCxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnR0VUJyxcclxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICAgICAgICAgICBcIkF1dGhvcml6YXRpb25cIjogXCI2NzhmYmQ5Mi1lNmU0LTQwNDQtYjA0Ny03NGNlMzM0ZmZkNGVcIlxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgKVxyXG4gICAgICAgICAgICAudGhlbigocmVzKSA9PiByZXMuanNvbigpKVxyXG4gICAgICAgICAgICAudGhlbigoZGF0YSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YSk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnRXJyb3I6JywgZXJyKTtcclxuICAgICAgICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICBnZXRJbml0aWFsQ2FyZCgpIHtcclxuICAgICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfS9jYXJkc2AsXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIG1ldGhvZDogXCJHRVRcIixcclxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICAgICAgICAgICBcIkF1dGhvcml6YXRpb25cIjogXCI2NzhmYmQ5Mi1lNmU0LTQwNDQtYjA0Ny03NGNlMzM0ZmZkNGVcIlxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgKVxyXG4gICAgICAgICAgICAudGhlbigocmVzKSA9PiByZXMuanNvbigpKVxyXG4gICAgICAgICAgICAudGhlbigoZGF0YSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YSk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnRXJyb3I6JywgZXJyKTtcclxuICAgICAgICAgICAgfSlcclxuICAgIH1cclxuXHJcbiAgICB1cGRhdGVVc2VyKCkge1xyXG5cclxuICAgIH1cclxuXHJcbiAgICBhZGRDYXJkKCkge1xyXG5cclxuICAgIH1cclxuXHJcbiAgICBkZWxldGVDYXJkKCkge1xyXG5cclxuICAgIH1cclxuXHJcbiAgICBsaW5rQ2FyZCgpIHtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgZGVsZXRlQ2FyZExpbmsoKSB7XHJcblxyXG4gICAgfVxyXG59XHJcblxyXG5cclxuZXhwb3J0IGNvbnN0IGFwaSA9IG5ldyBBcGkoJ2h0dHBzOi8vYXJvdW5kLm5vbW9yZXBhcnRpZXMuY28vdjEvd2ViX2VzXzExJywgXCI2NzhmYmQ5Mi1lNmU0LTQwNDQtYjA0Ny03NGNlMzM0ZmZkNGVcIik7IiwiY29uc3QgYWxsRm9ybXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmZvcm1cIik7XHJcbmNvbnN0IHBvcHVwRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBcIik7XHJcbmNvbnN0IGJ1dHRvbkVkaWRQcm9maWxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5idXR0b25zX19pdGVtX2luZGV4X3Byb2ZpbGVcIik7XHJcbmNvbnN0IGJ1dHRvbkFkZENhcmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmJ1dHRvbnNfX2l0ZW1faW5kZXhfYWRkLWNhcmRcIik7XHJcbmNvbnN0IGFsbE92ZXJsYXkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnBvcHVwX19vdmVybGF5XCIpO1xyXG5jb25zdCBhbGxJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuZm9ybV9fZXJyb3JcIik7XHJcbmNvbnN0IHBvcHVwUHJvZmlsZSA9IFwiLnBvcHVwX2VkaXQtcHJvZmlsZVwiO1xyXG5jb25zdCBwb3B1cEFkZENhcmQgPSBcIi5wb3B1cF9jb250ZW50LWFkZGNhcmRcIjtcclxuY29uc3QgcG9wdXBJbWFnZSA9IFwiLnBvcHVwX2NvbnRlbnQtaW1hZ2VcIjtcclxuY29uc3QgcHJvcHVwRGVsZXRlQ29maXJtYXRpb24gPSBcIi5wb3B1cF9kZWxldGUtY2FyZFwiO1xyXG5jb25zdCBwb3B1cEVkaXRBdmF0YXIgPSBcIi5wb3B1cF9hdmF0YXJcIjtcclxuY29uc3QgYnV0dG9uQ2xvc2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19jbG9zZS1idXR0b25cIik7XHJcbmNvbnN0IGJ1dHRvbkxpa2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRzX19lbGVtZW50X2l0ZW0taW1hZ2VuXCIpO1xyXG5jb25zdCBidXR0b25SZWN5Y2xlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkc19fZWxlbWVudF90cmFzdFwiKTtcclxuY29uc3QgYnV0dG9uRWRpdEF2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYnV0dG9uc19fZWRpdFwiKTtcclxuY29uc3QgY2FyZFRlbXBsYXRlID0gXCIjbmV3RWxlbWVudFwiO1xyXG5jb25zdCBjYXJkc0FyZWEgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRzXCIpO1xyXG5cclxuLy8gY29uc3QgaW5pdGlhbENhcmRzID0gW1xyXG4vLyAgICAge1xyXG4vLyAgICAgICAgIG5hbWU6IFwiVmFsbGUgZGUgWW9zZW1pdGVcIixcclxuLy8gICAgICAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vbmV3LW1hcmtldHMvV0VCX3NwcmludF81L0VTL3lvc2VtaXRlLmpwZ1wiLFxyXG4vLyAgICAgICAgIGFsdDogXCJWYWxsZSBZb3NlbWllIFZhbGxleVwiLFxyXG4vLyAgICAgfSxcclxuLy8gICAgIHtcclxuLy8gICAgICAgICBuYW1lOiBcIkxhZ28gTG91aXNlXCIsXHJcbi8vICAgICAgICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL25ldy1tYXJrZXRzL1dFQl9zcHJpbnRfNS9FUy9sYWtlLWxvdWlzZS5qcGdcIixcclxuLy8gICAgICAgICBhbHQ6IFwiTGFnbyBMYWtlIExvdWlzZVwiLFxyXG4vLyAgICAgfSxcclxuLy8gICAgIHtcclxuLy8gICAgICAgICBuYW1lOiBcIk1vbnRhw7FhcyBDYWx2YXNcIixcclxuLy8gICAgICAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vbmV3LW1hcmtldHMvV0VCX3NwcmludF81L0VTL2JhbGQtbW91bnRhaW5zLmpwZ1wiLFxyXG4vLyAgICAgICAgIGFsdDogXCJCYWxkIE1vdW50YWluc1wiLFxyXG4vLyAgICAgfSxcclxuLy8gICAgIHtcclxuLy8gICAgICAgICBuYW1lOiBcIkxhdGVtYXJcIixcclxuLy8gICAgICAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vbmV3LW1hcmtldHMvV0VCX3NwcmludF81L0VTL2xhdGVtYXIuanBnXCIsXHJcbi8vICAgICAgICAgYWx0OiBcIkxhdGVtYXJcIixcclxuLy8gICAgIH0sXHJcbi8vICAgICB7XHJcbi8vICAgICAgICAgbmFtZTogXCJQYXJxdWUgTmFjaW9uYWwgZGUgbGEgVmFub2lzZVwiLFxyXG4vLyAgICAgICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9uZXctbWFya2V0cy9XRUJfc3ByaW50XzUvRVMvdmFub2lzZS5qcGdcIixcclxuLy8gICAgICAgICBhbHQ6IFwiVmFub2lzZSBOYXRpb25hbFwiLFxyXG4vLyAgICAgfSxcclxuLy8gICAgIHtcclxuLy8gICAgICAgICBuYW1lOiBcIkxhZ28gZGkgQnJhaWVzXCIsXHJcbi8vICAgICAgICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL25ldy1tYXJrZXRzL1dFQl9zcHJpbnRfNS9FUy9sYWdvLmpwZ1wiLFxyXG4vLyAgICAgICAgIGFsdDogXCJMYWdvIGRpIEJyYWllc1wiLFxyXG4vLyAgICAgfSxcclxuLy8gXTtcclxuZXhwb3J0IHtcclxuICAgIHBvcHVwSW1hZ2UsXHJcbiAgICBwb3B1cFByb2ZpbGUsXHJcbiAgICBhbGxGb3JtcyxcclxuICAgIHBvcHVwRm9ybSxcclxuICAgIGJ1dHRvbkVkaWRQcm9maWxlLFxyXG4gICAgYnV0dG9uQWRkQ2FyZCxcclxuICAgIGFsbE92ZXJsYXksXHJcbiAgICBhbGxJbnB1dCxcclxuICAgIHBvcHVwQWRkQ2FyZCxcclxuICAgIGJ1dHRvbkNsb3NlLFxyXG4gICAgYnV0dG9uTGlrZSxcclxuICAgIGJ1dHRvblJlY3ljbGUsXHJcbiAgICBjYXJkc0FyZWEsXHJcbiAgICAvLyBpbml0aWFsQ2FyZHMsXHJcbiAgICBjYXJkVGVtcGxhdGUsXHJcbiAgICBwcm9wdXBEZWxldGVDb2Zpcm1hdGlvbixcclxuICAgIHBvcHVwRWRpdEF2YXRhcixcclxuICAgIGJ1dHRvbkVkaXRBdmF0YXIsXHJcbn07XHJcbiIsImltcG9ydCBcIi4vc3R5bGVzL2luZGV4LmNzc1wiO1xuXG5pbXBvcnQgeyByZXNldEZvcm1zIH0gZnJvbSBcIi4vdXRpbHMvdXRpbHMuanNcIjtcbmltcG9ydCBDYXJkIGZyb20gXCIuL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSBcIi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tIFwiLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzXCI7XG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XG5pbXBvcnQgQXBpIGZyb20gXCIuL2NvbXBvbmVudHMvQXBpcy5qc1wiO1xuaW1wb3J0IHtcbiAgICBwb3B1cEltYWdlLFxuICAgIC8vIGluaXRpYWxDYXJkcyxcbiAgICBhbGxGb3JtcyxcbiAgICBjYXJkVGVtcGxhdGUsXG4gICAgYnV0dG9uQWRkQ2FyZCxcbiAgICBidXR0b25FZGlkUHJvZmlsZSxcbiAgICBwb3B1cFByb2ZpbGUsXG4gICAgcG9wdXBBZGRDYXJkLFxuICAgIHByb3B1cERlbGV0ZUNvZmlybWF0aW9uLFxuICAgIHBvcHVwRWRpdEF2YXRhcixcbiAgICBidXR0b25FZGl0QXZhdGFyLFxuICAgIGJ1dHRvblJlY3ljbGUsXG4gICAgY2FyZHNBcmVhXG59IGZyb20gXCIuL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xuXG5cbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsICgpID0+IHtcbiAgICAvL0NsYXNlIGVuY2FyZ2FkYSBkZSBtb3N0cmFyIGxhIGltYWdlbiBzZWxlY2Npb25hZGEgZW4gbGEgdmVudGFuYSBlbWVyZ2VudGVcbiAgICBjb25zdCBwb3B1dEltYWdlbiA9IG5ldyBQb3B1cFdpdGhJbWFnZShwb3B1cEltYWdlKTtcbiAgICBwb3B1dEltYWdlbi5zZXRFdmVudExpc3RlbmVycygpO1xuXG4gICAgLy9GdW5jacOzbiBwYXJhIGVkaXRhciBlbCBwZXJmaWwgZGVsXG4gICAgY29uc3QgaGFuZGxlQ2FyZENsaWNrID0gKGRhdGEpID0+IHsgcG9wdXRJbWFnZW4ub3BlbihkYXRhLmxpbmssIGRhdGEubmFtZSkgfTtcblxuXG4gICAgLy9GdW5jacOzbiBwYXJhIGNyZWFyIHVuYSBudWV2YSB0YXJqZXRhXG4gICAgY29uc3QgY3JlYXRlQ2FyZHMgPSAoZGF0YSkgPT4ge1xuICAgICAgICBjb25zdCBjYXJkc0ludGFuY2UgPSBuZXcgQ2FyZCh7XG4gICAgICAgICAgICBkYXRhLCBoYW5kbGVDYXJkQ2xpY2ssXG4gICAgICAgICAgICBoYW5kbGVEZWxldGVDbGljazogKGNhckVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBjdXJyZW50Q2FyZCA9IGNhckVsZW1lbnQ7XG4gICAgICAgICAgICAgICAgcG9wdXBEZWxldGVDb2Zpcm1hdGlvbi5vcGVuKGNhckVsZW1lbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICAgICAgY2FyZFRlbXBsYXRlXG4gICAgICAgICk7XG4gICAgICAgIHJldHVybiBjYXJkc0ludGFuY2UuY3JlYXRlTmV3Q2FyZCgpO1xuICAgIH07XG5cbiAgICAvLyBmZXRjaChcImh0dHBzOi8vYXJvdW5kLm5vbW9yZXBhcnRpZXMuY28vdjEvd2ViX2VzXzExL2NhcmRzXCIsIHtcbiAgICAvLyAgICAgbWV0aG9kOiBcIkdFVFwiLFxuICAgIC8vICAgICBoZWFkZXJzOiB7XG4gICAgLy8gICAgICAgICBBdXRob3JpemF0aW9uOiBcIjY3OGZiZDkyLWU2ZTQtNDA0NC1iMDQ3LTc0Y2UzMzRmZmQ0ZVwiXG4gICAgLy8gICAgIH1cbiAgICAvLyB9KVxuICAgIC8vICAgICAudGhlbigocmVzKSA9PiByZXMuanNvbigpKVxuICAgIC8vICAgICAudGhlbigoaW5pdGlhbENhcmRzKSA9PiB7XG5cbiAgICAvLyAgICAgICAgIGNvbnN0IG15U2VjdGlvbiA9IG5ldyBTZWN0aW9uKFxuICAgIC8vICAgICAgICAgICAgIHtcbiAgICAvLyAgICAgICAgICAgICAgICAgaXRlbXM6IGluaXRpYWxDYXJkcyxcbiAgICAvLyAgICAgICAgICAgICAgICAgcmVuZGVyZXI6IChpdGVtKSA9PiB7XG4gICAgLy8gICAgICAgICAgICAgICAgICAgICByZXR1cm4gY3JlYXRlQ2FyZHMoaXRlbSk7XG4gICAgLy8gICAgICAgICAgICAgICAgIH0sXG4gICAgLy8gICAgICAgICAgICAgfSxcbiAgICAvLyAgICAgICAgICAgICAnLmNhcmRzJ1xuICAgIC8vICAgICAgICAgKTtcbiAgICAvLyAgICAgICAgIG15U2VjdGlvbi5yZW5kZXJlcigpO1xuXG4gICAgLy8gICAgIH0pXG4gICAgLy8gICAgIC5jYXRjaChlcnJvciA9PiB7XG4gICAgLy8gICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7XG4gICAgLy8gICAgIH0pO1xuXG5cbiAgICAvL0NsYXNlIHF1ZSBhbGFtY2VuYXLDoSBsb3MgZGF0b3MgZGVsIHVzdWFyaW9cbiAgICBjb25zdCB1c2VyRGF0YSA9IG5ldyBVc2VySW5mbyh7XG4gICAgICAgIG5hbWVTZWxlY3RvcjogXCIuYnV0dG9uc19fbmFtZVwiLFxuICAgICAgICBqb2JTZWxlY3RvcjogXCIuYnV0dG9uc19fZXhwbG9yZXJcIixcbiAgICB9KTtcblxuICAgIC8vSW5zdGFuY2lhbW9zIHRvZGFzIGxhcyBjbGFzZXMgcGFyYSBsb3MgcG9wdXBcbiAgICBjb25zdCBwb3B1cEZvcm1FZGl0UHJvZmlsZSA9IG5ldyBQb3B1cFdpdGhGb3JtKHBvcHVwUHJvZmlsZSwgKGZvcm1EYXRhKSA9PiB7XG4gICAgICAgIHVzZXJEYXRhLnNldFVzZXJJbmZvKHsgbmFtZTogZm9ybURhdGEubmFtZSwgam9iOiBmb3JtRGF0YS5hY3Rpdml0eSB9KTtcbiAgICAgICAgcG9wdXBGb3JtRWRpdFByb2ZpbGUuY2xvc2UoKTtcbiAgICAgICAgcmVzZXRGb3JtcyhhbGxGb3Jtcyk7XG4gICAgfSk7XG4gICAgcG9wdXBGb3JtRWRpdFByb2ZpbGUuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuICAgIC8vQ8OzZGlnbyBwYXJhIGJyaXIgZWwgcG9wdXAgZGUgZWRpdGFyIHBlcmZpbFxuICAgIGJ1dHRvbkVkaWRQcm9maWxlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgIHBvcHVwRm9ybUVkaXRQcm9maWxlLm9wZW4oKTtcbiAgICB9KTtcblxuICAgIC8vSW5zdGFuY2lhIGRlIHBvcHVwV2l0aEZvcm0gcGFyYSBtYW5lamFyIGVsIGZvcm11bGFyaW8gZGUgYcOxYWRpciBsYSB0YXJqZXRhXG4gICAgY29uc3QgcG9wdXBGb3JtQ29udGVudEFkZENhcmQgPSBuZXcgUG9wdXBXaXRoRm9ybShwb3B1cEFkZENhcmQsIChmb3JtRGF0YSkgPT4ge1xuICAgICAgICBjb25zdCBuZXdDYXJkID0gY3JlYXRlQ2FyZHMoe1xuICAgICAgICAgICAgbmFtZTogZm9ybURhdGEubmV3cGxhY2UsXG4gICAgICAgICAgICBsaW5rOiBmb3JtRGF0YS5lbmxhY2UsXG4gICAgICAgIH0pO1xuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRzXCIpLnByZXBlbmQobmV3Q2FyZCk7XG4gICAgICAgIHBvcHVwRm9ybUNvbnRlbnRBZGRDYXJkLmNsb3NlKCk7XG4gICAgICAgIHJlc2V0Rm9ybXMoYWxsRm9ybXMpO1xuICAgIH0pO1xuICAgIHBvcHVwRm9ybUNvbnRlbnRBZGRDYXJkLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbiAgICAvL0NvZGlnbyBwYXJhIGFicmlsIGVsIGZvcm11bGFyaW8gZGUgYcOxYWRpciB0YXJqZXRhIGRhbmRvIGNsaWNrIGVuIHVuIGJvdG9uIGRlIGFicmlyIGVsIHBvcHVwXG4gICAgYnV0dG9uQWRkQ2FyZC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICBwb3B1cEZvcm1Db250ZW50QWRkQ2FyZC5vcGVuKCk7XG4gICAgfSk7XG5cbiAgICBjb25zdCBwb3B1cEZvcm1FZGl0QXZhdGFyID0gbmV3IFBvcHVwV2l0aEZvcm0ocG9wdXBFZGl0QXZhdGFyLCAoZm9ybURhdGEpID0+IHsgfSk7XG4gICAgcG9wdXBGb3JtRWRpdEF2YXRhci5zZXRFdmVudExpc3RlbmVycygpO1xuICAgIGJ1dHRvbkVkaXRBdmF0YXIuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgcG9wdXBGb3JtRWRpdEF2YXRhci5vcGVuKCk7XG4gICAgfSk7XG5cbiAgICBjb25zdCBwb3B1cEZvcm1EZWxldGVkQ29uZmlybWF0aW9uID0gbmV3IFBvcHVwV2l0aEZvcm0ocHJvcHVwRGVsZXRlQ29maXJtYXRpb24sIChmb3JtRGF0YSkgPT4geyB9KTtcbiAgICBwb3B1cEZvcm1EZWxldGVkQ29uZmlybWF0aW9uLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgYnV0dG9uUmVjeWNsZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgcG9wdXBGb3JtRGVsZXRlZENvbmZpcm1hdGlvbi5vcGVuKCk7XG4gICAgfSk7XG5cblxuICAgIC8vVmFsaWRhY2nDs24gZGVsIGZvcm11bGFyaW9cbiAgICBjb25zdCBWYWxpZGF0aW9uID0gbmV3IEZvcm1WYWxpZGF0b3IoYWxsRm9ybXMpO1xuICAgIFZhbGlkYXRpb24uZW5hYmxlVmFsaWRhdGlvbigpO1xuXG59KVxuIl0sIm5hbWVzIjpbInJlc2V0Rm9ybXMiLCJmb3JtcyIsImZvckVhY2giLCJmb3JtIiwicmVzZXQiLCJxdWVyeVNlbGVjdG9yIiwiY2xhc3NMaXN0IiwiYWRkIiwiQ2FyZCIsIl9yZWYiLCJjYXJkU2VsZWN0b3IiLCJkYXRhIiwiaGFuZGxlQ2FyZENsaWNrIiwiX2NsYXNzQ2FsbENoZWNrIiwidGhpcyIsIl9saW5rIiwibGluayIsIl9uYW1lIiwibmFtZSIsIl9jYXJkU2VsZWN0b3IiLCJfaGFuZGxlQ2FyZENsaWNrIiwiX2xpa2VzQXJyYXkiLCJsaWtlIiwia2V5IiwidmFsdWUiLCJkb2N1bWVudCIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJnZXRJdGVtIiwiX2VsZW1lbnQiLCJhZGRFdmVudExpc3RlbmVyIiwiZXZlbnQiLCJsaWtlQnV0dG9uIiwidGFyZ2V0IiwiY291bnRMaWtlIiwibGlrZUNvdW50IiwicGVyc2VJbnQiLCJ0ZXh0Q29udGVudCIsImNvbnRhaW5zIiwidG9nZ2xlIiwiX3RoaXMiLCJkZWxldGVDb25maXJtYXRpb24iLCJjb25maXJtIiwicmVtb3ZlIiwiY29uc29sZSIsImxvZyIsIl90aGlzMiIsIl90aGlzMyIsIl9oYW5kbGVMaWtlQW5kRGlzbGlrZSIsIl9oYW5kbGVSZW1vdmUiLCJfc2hvd0NhcmQiLCJfaW1hZ2VuRWxlbWVudCIsIl9nZXRUZW1wbGF0ZSIsInNyYyIsImFsdCIsIl9zZXRFdmVudExpc3RlbmVycyIsIkZvcm1WYWxpZGF0b3IiLCJhbGxGb3JtcyIsIl9kZWZpbmVQcm9wZXJ0eSIsImlucHV0RWxlbWVudCIsImVycm9yTWVzc2FnZSIsImVycm9yRWxlbWVudCIsInBhcmVudEVsZW1lbnQiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2hpZGVJbnB1dEVycm9yIiwiX3Nob3dJbnB1dEVycm9yIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJpbnB1dExpc3QiLCJzb21lIiwiYnV0dG9uRWxlbWVudCIsIl9oYXNJbnZhbGlkSW5wdXQiLCJfYWxsRm9ybXMiLCJmb3JtRWxlbWVudCIsImV2dCIsInByZXZlbnREZWZhdWx0IiwiQXJyYXkiLCJmcm9tIiwiZmllbGRzZXQiLCJlbmFibGVWYWxpZGF0aW9uIiwicXVlcnlTZWxlY3RvckFsbCIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJjbG9zZSIsIl9wb3B1cFNlbGVjdG9yIiwiX3BvcHVwRWxlbWVudCIsIl9oYW5kbGVFc2NDbG9zZSIsImJpbmQiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiY2xvc2VCdXR0b24iLCJhbGxPdmVybGF5Iiwib3ZlcmxheSIsIlBvcHVwV2l0aEZvcm0iLCJfUG9wdXAiLCJzdWJtaUNhbGxiYWNrIiwiX2NhbGxTdXBlciIsIl9zdWJtaXRCdXR0b24iLCJfZm9ybSIsIl9pbmhlcml0cyIsInZhbHVlc0ltcHV0IiwiaXRlbSIsIl9nZXQiLCJfZ2V0UHJvdG90eXBlT2YiLCJwcm90b3R5cGUiLCJjYWxsIiwiZm9ybURhdGEiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJfY2xvc2VCdXRvblNlbGVjdG9yIiwiUG9wdXBXaXRoSW1hZ2UiLCJwb3B1cEVsZW1lbnQiLCJfaW1hZ2UiLCJfZGVzY3JpcHRpb24iLCJhbGVydCIsIlVzZXJJbmZvIiwibmFtZVNlbGVjdG9yIiwiam9iU2VsZWN0b3IiLCJfbmFtZUVsZW1lbnQiLCJfam9iRWxlbWVudCIsImpvYiIsIl9yZWYyIiwiQXBpIiwidXJsIiwidG9rZW4iLCJfdXJsIiwiX3Rva2VuIiwiZmV0Y2giLCJjb25jYXQiLCJtZXRob2QiLCJoZWFkZXJzIiwidGhlbiIsInJlcyIsImpzb24iLCJjYXRjaCIsImVyciIsImJ1dHRvbkVkaWRQcm9maWxlIiwiYnV0dG9uQWRkQ2FyZCIsImJ1dHRvblJlY3ljbGUiLCJidXR0b25FZGl0QXZhdGFyIiwicG9wdXRJbWFnZW4iLCJzZXRFdmVudExpc3RlbmVycyIsIm9wZW4iLCJ1c2VyRGF0YSIsInBvcHVwRm9ybUVkaXRQcm9maWxlIiwic2V0VXNlckluZm8iLCJhY3Rpdml0eSIsInBvcHVwRm9ybUNvbnRlbnRBZGRDYXJkIiwibmV3Q2FyZCIsImhhbmRsZURlbGV0ZUNsaWNrIiwiY2FyRWxlbWVudCIsImN1cnJlbnRDYXJkIiwicG9wdXBEZWxldGVDb2Zpcm1hdGlvbiIsImNyZWF0ZU5ld0NhcmQiLCJjcmVhdGVDYXJkcyIsIm5ld3BsYWNlIiwiZW5sYWNlIiwicHJlcGVuZCIsInBvcHVwRm9ybUVkaXRBdmF0YXIiLCJwb3B1cEZvcm1EZWxldGVkQ29uZmlybWF0aW9uIl0sInNvdXJjZVJvb3QiOiIifQ==