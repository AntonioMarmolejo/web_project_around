!function(){"use strict";function e(e){e.forEach((function(e){e.reset(),e.querySelector(".form__submit").classList.add("button_inactive")}))}function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}function n(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,r(o.key),o)}}function r(e){var n=function(e,n){if("object"!=t(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!=t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==t(n)?n:n+""}var o=function(){return e=function e(t,n){var r=t.data,o=t.handleCardClick;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._link=r.link,this._name=r.name,this._cardSelector=n,this._handleCardClick=o,this._like=r.like||{}},(t=[{key:"_getTemplate",value:function(){return document.querySelector(this._cardSelector).content.querySelector(".cards__element").cloneNode("true")}},{key:"_handleLikeAndDislike",value:function(){this._element.querySelector(".cards__element_itemImage").addEventListener("click",(function(e){e.target.classList.toggle("cards__like_active")}))}},{key:"_handleRemove",value:function(){var e=this,t=document.querySelector(".popup_delete-card"),n=document.querySelector(".form__submit_confirmation");this._element.querySelector(".cards__element_trast").addEventListener("click",(function(){t.classList.toggle("popup_show"),n.addEventListener("click",(function(){e._element.remove(),t.classList.toggle("popup_show"),console.log("¡La terjeta fue eliminada con Éxito!")}))}))}},{key:"_showCard",value:function(){var e=this;this._element.querySelector(".cards__element_image").addEventListener("click",(function(){e._handleCardClick({link:e._link,name:e._name})}))}},{key:"_setEventListeners",value:function(){var e=this;this._handleLikeAndDislike(),this._handleRemove(),this._showCard(),this._imagenElement.addEventListener("click",(function(){e._handleCardClick({link:e._link,name:e._name})}))}},{key:"createNewCard",value:function(){return this._element=this._getTemplate(),this._element.querySelector(".cards__element_itemTitle").textContent=this._name,this._imagenElement=this._element.querySelector(".cards__element_image"),this._imagenElement.src=this._link,this._imagenElement.alt=this._name,this._setEventListeners(),this._element}}])&&n(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}(),i=o;function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,l(r.key),r)}}function a(e,t,n){return(t=l(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e){var t=function(e,t){if("object"!=c(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=c(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==c(t)?t:t+""}var s=function(){return e=function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),a(this,"_showInputError",(function(e,t){var n=e.parentElement.querySelector(".form__error");e.classList.add("form__input_type_error"),n.textContent=t,n.classList.add("form__input-error_active")})),a(this,"_hideInputError",(function(e){var t=e.parentElement.querySelector(".form__error");e.classList.remove("form__input_type_error"),t.classList.remove("form__input-error_active"),t.textContent=""})),a(this,"_checkInputValidity",(function(e){e.validity.valid?n._hideInputError(e):n._showInputError(e,e.validationMessage)})),a(this,"_hasInvalidInput",(function(e){return e.some((function(e){return!e.validity.valid}))})),a(this,"_toggleButtonState",(function(e,t){n._hasInvalidInput(e)?t.classList.add("button_inactive"):t.classList.remove("button_inactive")})),a(this,"enableValidation",(function(){n._allForms.forEach((function(e){e.addEventListener("submit",(function(e){e.preventDefault()})),Array.from(document.forms).forEach((function(e){n._setEventListeners(e)}))}))})),this._allForms=t,this.enableValidation()},(t=[{key:"_setEventListeners",value:function(e){var t=this,n=Array.from(e.querySelectorAll(".form__input")),r=e.querySelector(".form__submit");n.forEach((function(e){e.addEventListener("input",(function(){t._checkInputValidity(e),t._toggleButtonState(n,r)}))}))}}])&&u(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}(),f=s;function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,m(r.key),r)}}function m(e){var t=function(e,t){if("object"!=p(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=p(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==p(t)?t:t+""}var v=function(){return e=function e(t){var n,r,o,i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),n=this,o=function(e){"Escape"===e.key&&i.close()},(r=m(r="_handleEscClose"))in n?Object.defineProperty(n,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[r]=o,this._popupSelector=t,this._popupElement=document.querySelector(this._popupSelector),this._handleEscClose=this._handleEscClose.bind(this)},(t=[{key:"open",value:function(){this._popupElement.classList.add("popup_show"),document.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){this._popupElement.classList.remove("popup_show"),document.removeEventListener("keydown",this._handleEscClose)}},{key:"setEventListeners",value:function(){var e=this,t=this._popupElement.querySelector(".popup__close-button"),n=this._popupElement.querySelectorAll(".popup__overlay");t.addEventListener("click",(function(){e.close()})),n.forEach((function(t){t.addEventListener("click",(function(){e.close()}))})),document.addEventListener("keydown",this._handleEscClose)}}])&&y(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,_(r.key),r)}}function _(e){var t=function(e,t){if("object"!=d(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=d(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==d(t)?t:t+""}function h(e,t,n){return t=E(t),function(e,t){if(t&&("object"===d(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,S()?Reflect.construct(t,n||[],E(e).constructor):t.apply(e,n))}function S(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(S=function(){return!!e})()}function w(){return w="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=E(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},w.apply(this,arguments)}function E(e){return E=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},E(e)}function g(e,t){return g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},g(e,t)}var k=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=h(this,t,[e]))._submitButton=n,r._form=document.querySelector(e).querySelector(".form"),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g(e,t)}(t,e),n=t,(r=[{key:"_getInputValues",value:function(){var e={};return this._form.querySelectorAll(".form__input").forEach((function(t){t.name&&(e[t.name]=t.value)})),e}},{key:"close",value:function(){this._form.reset(),w(E(t.prototype),"close",this).call(this)}},{key:"setEventListeners",value:function(){var e=this;w(E(t.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",(function(t){t.preventDefault();var n=e._getInputValues();e._submitButton(n),e.close()}));var n=this._form.querySelector(this._closeButonSelector);n&&n.addEventListener("click",(function(t){t.preventDefault(),e.close()}))}}])&&b(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(v);function j(e){return j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},j(e)}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,P(r.key),r)}}function P(e){var t=function(e,t){if("object"!=j(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=j(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==j(t)?t:t+""}function L(e,t,n){return t=T(t),function(e,t){if(t&&("object"===j(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,C()?Reflect.construct(t,n||[],T(e).constructor):t.apply(e,n))}function C(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(C=function(){return!!e})()}function q(){return q="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=T(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},q.apply(this,arguments)}function T(e){return T=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},T(e)}function I(e,t){return I=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},I(e,t)}var x=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),L(this,t,[e])}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&I(e,t)}(t,e),n=t,(r=[{key:"open",value:function(e,n){var r=document.querySelector(this._popupSelector);this._image=r.querySelector("#popup__image"),this._description=r.querySelector(".popup__title"),this._image&&this._description?(this._image.src=e,this._image.alt=n,this._description.textContent=n,q(T(t.prototype),"open",this).call(this)):alert("Elemento de imagen o descripcion no encontradas")}}])&&O(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(v);function R(e){return R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},R(e)}function A(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,D(r.key),r)}}function D(e){var t=function(e,t){if("object"!=R(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=R(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==R(t)?t:t+""}var B=function(){return e=function e(t,n){var r=t.items,o=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._items=r,this._renderer=o,this._container=document.querySelector(n)},(t=[{key:"clear",value:function(){this._container.innerHTML=""}},{key:"addItem",value:function(e){this._container.append(e)}},{key:"renderer",value:function(){var e=this;this.clear(),this._items.forEach((function(t){var n=e._renderer(t);e.addItem(n)}))}}])&&A(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function V(e){return V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},V(e)}function U(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,N(r.key),r)}}function N(e){var t=function(e,t){if("object"!=V(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=V(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==V(t)?t:t+""}var z=function(){return e=function e(t){var n=t.nameSelector,r=t.jobSelector;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._nameElement=document.querySelector(n),this._jobElement=document.querySelector(r)},(t=[{key:"getUserInfo",value:function(){return{name:this._nameElement.textContent,job:this._jobElement.textContent}}},{key:"setUserInfo",value:function(e){var t=e.name,n=e.job;this._nameElement.textContent=t,this._jobElement.textContent=n}}])&&U(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();function F(e){return F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},F(e)}function H(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,M(r.key),r)}}function M(e){var t=function(e,t){if("object"!=F(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=F(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==F(t)?t:t+""}new(function(){return e=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.url=t,this.token=n},(t=[{key:"getInitialCard",value:function(){}}])&&H(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}())({baseUrl:"https://around.nomoreparties.co/v1/web_es_11/cards",Headers:{Authorization:"678fbd92-e6e4-4044-b047-74ce334ffd4e","Content-Type":"application/json"}});var G=document.querySelectorAll(".form"),J=(document.querySelector(".popup"),document.querySelector(".buttons__item_index_profile")),K=document.querySelector(".buttons__item_index_add-card"),Q=(document.querySelectorAll(".popup__overlay"),document.querySelectorAll(".form__error"),document.querySelector(".popup__close-button"),document.querySelector(".cards__element_item-imagen"),document.querySelector(".cards__element_trast")),W=document.querySelector(".buttons__edit"),X=(document.querySelector(".cards"),new x(".popup_content-image"));X.setEventListeners();var Y=function(e){X.open(e.link,e.name)},Z=function(e){return new i({data:e,handleCardClick:Y,handleDeleteClick:function(e){currentCard=e,popupDeleteCofirmation.open(e)}},"#newElement").createNewCard()};fetch("https://around.nomoreparties.co/v1/web_es_11/cards",{method:"GET",headers:{Authorization:"678fbd92-e6e4-4044-b047-74ce334ffd4e"}}).then((function(e){return e.json()})).then((function(e){var t=new B({items:e,renderer:function(e){return Z(e)}},".cards");window.addEventListener("load",(function(){return t.renderer()}))})).catch((function(e){console.error(e)}));var $=new z({nameSelector:".buttons__name",jobSelector:".buttons__explorer"}),ee=new k(".popup_edit-profile",(function(t){$.setUserInfo({name:t.name,job:t.activity}),ee.close(),e(G)}));ee.setEventListeners(),J.addEventListener("click",(function(){ee.open()}));var te=new k(".popup_content-addcard",(function(t){var n=Z({name:t.newplace,link:t.enlace});document.querySelector(".cards").prepend(n),te.close(),e(G)}));te.setEventListeners(),K.addEventListener("click",(function(){te.open()}));var ne=new k(".popup_avatar",(function(e){}));ne.setEventListeners(),W.addEventListener("click",(function(){ne.open()}));var re=new k(".popup_delete-card",(function(e){}));re.setEventListeners(),Q.addEventListener("click",(function(){re.open()})),new f(G).enableValidation()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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R0FDekNELEdBQXdCbkYsUUFDeEIvRSxFQUFXbUQsRUFDZixJQUNBK0csR0FBd0J2QixvQkFHeEJKLEVBQWMxRyxpQkFBaUIsU0FBUyxXQUNwQ3FJLEdBQXdCdEIsTUFDNUIsSUFFQSxJQUFNMkIsR0FBc0IsSUFBSS9FLEVEN0hSLGlCQzZIdUMsU0FBQ2EsR0FDaEUsSUFFQWtFLEdBQW9CNUIsb0JBQ3BCRixFQUFpQjVHLGlCQUFpQixTQUFTLFdBQ3ZDMEksR0FBb0IzQixNQUN4QixJQUVBLElBQU00QixHQUErQixJQUFJaEYsRUR0SVQsc0JDc0lnRCxTQUFDYSxHQUNqRixJQUNBbUUsR0FBNkI3QixvQkFFN0JILEVBQWMzRyxpQkFBaUIsU0FBUyxXQUNwQzJJLEdBQTZCNUIsTUFDakMsSUFHbUIsSUFBSTFGLEVBQWNDLEdBQzFCc0Isa0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9zcmMvdXRpbHMvdXRpbHMuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0X2Fyb3VuZC8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0X2Fyb3VuZC8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF9hcm91bmQvLi9zcmMvY29tcG9uZW50cy9BcGlzLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0X2Fyb3VuZC8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfYXJvdW5kLy4vc3JjL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIEZ1bmNpw7NuIHF1ZSBub3MgcGVybWl0ZSByZXNldGVhciBsb3MgZm9ybXVsYXJpb3MgeSB0YW1iacOpblxyXG5mdW5jdGlvbiByZXNldEZvcm1zKGZvcm1zKSB7XHJcbiAgICBmb3Jtcy5mb3JFYWNoKChmb3JtKSA9PiB7XHJcbiAgICAgICAgLy8gUmVzZXRlYSBjYWRhIGVudHJhZGEgZGUgbG9zIGZvcm11bGFyaW9zIHBhcmEgZWxpbWluYXIgbG9zIGRhdG9zIHF1ZSBxdWVkYW5cclxuICAgICAgICBmb3JtLnJlc2V0KCk7XHJcbiAgICAgICAgZm9ybS5xdWVyeVNlbGVjdG9yKFwiLmZvcm1fX3N1Ym1pdFwiKS5jbGFzc0xpc3QuYWRkKFwiYnV0dG9uX2luYWN0aXZlXCIpO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbmV4cG9ydCB7IHJlc2V0Rm9ybXMgfTtcclxuIiwiY2xhc3MgQ2FyZCB7XHJcbiAgICBjb25zdHJ1Y3Rvcih7IGRhdGEsIGhhbmRsZUNhcmRDbGljayB9LCBjYXJkU2VsZWN0b3IpIHtcclxuICAgICAgICB0aGlzLl9saW5rID0gZGF0YS5saW5rO1xyXG4gICAgICAgIHRoaXMuX25hbWUgPSBkYXRhLm5hbWU7XHJcbiAgICAgICAgdGhpcy5fY2FyZFNlbGVjdG9yID0gY2FyZFNlbGVjdG9yO1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayA9IGhhbmRsZUNhcmRDbGljaztcclxuICAgICAgICB0aGlzLl9saWtlID0gZGF0YS5saWtlIHx8IHt9O1xyXG5cclxuICAgIH1cclxuXHJcbiAgICBfZ2V0VGVtcGxhdGUoKSB7XHJcbiAgICAgICAgY29uc3QgbmV3RWxlbW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkU2VsZWN0b3IpLmNvbnRlbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkc19fZWxlbWVudFwiKVxyXG4gICAgICAgICAgICAuY2xvbmVOb2RlKFwidHJ1ZVwiKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIG5ld0VsZW1udDtcclxuICAgIH1cclxuXHJcbiAgICBfaGFuZGxlTGlrZUFuZERpc2xpa2UoKSB7XHJcbiAgICAgICAgLy9BIGxhIHRhcmpldGEgY3JlYWRhIHNlIGxlIGRhIGVsIEV2ZW50byBDbGljayBxdWUgYWN0aXZhIG8gZGVzYWN0aXZhIGVsIGJvdG9uIGRlIG1lIGd1c3RhIHNpIGVsIHVzdWFyaW8gbG8gc2VsZWNjaW9uYVxyXG4gICAgICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkc19fZWxlbWVudF9pdGVtSW1hZ2VcIikuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICBldmVudC50YXJnZXQuY2xhc3NMaXN0LnRvZ2dsZShcImNhcmRzX19saWtlX2FjdGl2ZVwiKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBfaGFuZGxlUmVtb3ZlKCkge1xyXG4gICAgICAgIGNvbnN0IGRlbGV0ZUNvbmZpcm1hdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfZGVsZXRlLWNhcmRcIilcclxuICAgICAgICBjb25zdCBjb25maXJtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb3JtX19zdWJtaXRfY29uZmlybWF0aW9uXCIpO1xyXG5cclxuICAgICAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZHNfX2VsZW1lbnRfdHJhc3RcIikuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuXHJcbiAgICAgICAgICAgIGRlbGV0ZUNvbmZpcm1hdGlvbi5jbGFzc0xpc3QudG9nZ2xlKFwicG9wdXBfc2hvd1wiKTtcclxuICAgICAgICAgICAgY29uZmlybS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fZWxlbWVudC5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgIGRlbGV0ZUNvbmZpcm1hdGlvbi5jbGFzc0xpc3QudG9nZ2xlKFwicG9wdXBfc2hvd1wiKTtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiwqFMYSB0ZXJqZXRhIGZ1ZSBlbGltaW5hZGEgY29uIMOJeGl0byFcIilcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgX3Nob3dDYXJkKCkge1xyXG4gICAgICAgIC8vQSBsYSB0YXJqZXRhIGNyZWFkYSBzZSBsZSBkYSBlbCBldmVudG8gY2xpY2sgcXVlIG5vcyBwZXJtaXRlIG1vc3RyYXIgbGEgdGFyamV0YSBlbiBsYSBwYW50YWxsYSB1bmEgdmV6IHF1ZSBlbCB1c3VhcmlvIGxhIHNlbGVjY2lvbmVcclxuICAgICAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZHNfX2VsZW1lbnRfaW1hZ2VcIikuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrKHsgbGluazogdGhpcy5fbGluaywgbmFtZTogdGhpcy5fbmFtZSB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZUxpa2VBbmREaXNsaWtlKCk7XHJcbiAgICAgICAgdGhpcy5faGFuZGxlUmVtb3ZlKCk7XHJcbiAgICAgICAgdGhpcy5fc2hvd0NhcmQoKTtcclxuICAgICAgICB0aGlzLl9pbWFnZW5FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayh7IGxpbms6IHRoaXMuX2xpbmssIG5hbWU6IHRoaXMuX25hbWUgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy9VdGlsaXphIGxhIHBsYW50aWxsYSBjb2xvY2FkYSBlbiBodG1sIHBhcmEgY3JlYXIgbGEgbnVldmEgdGFyamV0YSBpbmdyZXNhZGEgcG9yIGVsIHVzdWFyaW9cclxuICAgIGNyZWF0ZU5ld0NhcmQoKSB7XHJcbiAgICAgICAgdGhpcy5fZWxlbWVudCA9IHRoaXMuX2dldFRlbXBsYXRlKCk7XHJcbiAgICAgICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRzX19lbGVtZW50X2l0ZW1UaXRsZVwiKS50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XHJcbiAgICAgICAgdGhpcy5faW1hZ2VuRWxlbWVudCA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkc19fZWxlbWVudF9pbWFnZVwiKTtcclxuICAgICAgICB0aGlzLl9pbWFnZW5FbGVtZW50LnNyYyA9IHRoaXMuX2xpbms7XHJcbiAgICAgICAgdGhpcy5faW1hZ2VuRWxlbWVudC5hbHQgPSB0aGlzLl9uYW1lO1xyXG4gICAgICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLl9lbGVtZW50O1xyXG4gICAgfVxyXG5cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgQ2FyZDtcclxuIiwiY2xhc3MgRm9ybVZhbGlkYXRvciB7ICAgIGNvbnN0cnVjdG9yKGFsbEZvcm1zKSB7XHJcbiAgICAgICAgdGhpcy5fYWxsRm9ybXMgPSBhbGxGb3JtcztcclxuICAgICAgICB0aGlzLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuICAgIH1cclxuXHJcbiAgICAvL0Z1bmNpw7NuIHBhcmEgbW9zdHJhciBlbCBtZW5zYWplIGRlIGVycm9yIGN1YW5kbyBlbCB1c3VhcmlvIGludHJvZHVjZSBkYXRvcyBlcnJvbmVvcyBlbiBsb3MgY2FtcG9zXHJcbiAgICBfc2hvd0lucHV0RXJyb3IgPSAoaW5wdXRFbGVtZW50LCBlcnJvck1lc3NhZ2UpID0+IHtcclxuICAgICAgICBjb25zdCBlcnJvckVsZW1lbnQgPVxyXG4gICAgICAgICAgICBpbnB1dEVsZW1lbnQucGFyZW50RWxlbWVudC5xdWVyeVNlbGVjdG9yKGAuZm9ybV9fZXJyb3JgKTtcclxuICAgICAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImZvcm1fX2lucHV0X3R5cGVfZXJyb3JcIik7XHJcbiAgICAgICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gZXJyb3JNZXNzYWdlO1xyXG4gICAgICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiZm9ybV9faW5wdXQtZXJyb3JfYWN0aXZlXCIpO1xyXG4gICAgfTtcclxuXHJcbiAgICAvLyBGdW5jacOzbiBwYXJhIG9jdWx0YXIgZWwgbWVuc2FqZSBkZSBlcnJvciBjdWFuZG8gZWwgdXN1YXJpbyBwb25nYSB0b2RvcyBsb3MgZGF0b3MgcmVxdWVyaWRvc1xyXG4gICAgX2hpZGVJbnB1dEVycm9yID0gKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGVycm9yRWxlbWVudCA9XHJcbiAgICAgICAgICAgIGlucHV0RWxlbWVudC5wYXJlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYC5mb3JtX19lcnJvcmApO1xyXG4gICAgICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwiZm9ybV9faW5wdXRfdHlwZV9lcnJvclwiKTtcclxuICAgICAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcImZvcm1fX2lucHV0LWVycm9yX2FjdGl2ZVwiKTtcclxuICAgICAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBcIlwiO1xyXG4gICAgfTtcclxuXHJcbiAgICAvL0VzdGEgZnVuY2nDs24gcmV2aXNhIHNpIGVsIGlucHV0IGVzIHbDoWxpZG8gbyBubyB5IGRlcGVuZGllbmRvIGRlIGVzdG8gYWN0aXZhIG8gZGVzYWN0aXZhIGVsIGJvdG9uIGd1YXJkYXJcclxuICAgIF9jaGVja0lucHV0VmFsaWRpdHkgPSAoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgICAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcclxuICAgICAgICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50LCBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2UpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAvL0VzdGEgZnVuY2nDs24gZGV2dWVsdmUgdHJ1ZSBzaSBhbG1lbm9zIGhheSB1biBpbnB1dCBubyB2w6FsaWRvIGVuIGVsIGFycmF5XHJcbiAgICBfaGFzSW52YWxpZElucHV0ID0gKGlucHV0TGlzdCkgPT4ge1xyXG4gICAgICAgIHJldHVybiBpbnB1dExpc3Quc29tZSgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICAvL0VzdGEgZnVuY2nDs24gbm9zIHZlcmlmaWNhIHNpIGFsZ3VubyBkZSBsb3MgY2FtcG9zIGVzIHbDoWxpZG8geSBkZXBlbmRpZW5kbyBkZSBlc3RvIGFjdGl2YSBvIGRlc2FjdGl2YSBlbCBib3RvbiBndWFyZGFyXHJcbiAgICBfdG9nZ2xlQnV0dG9uU3RhdGUgPSAoaW5wdXRMaXN0LCBidXR0b25FbGVtZW50KSA9PiB7XHJcbiAgICAgICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dChpbnB1dExpc3QpKSB7XHJcbiAgICAgICAgICAgIGJ1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImJ1dHRvbl9pbmFjdGl2ZVwiKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBidXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJidXR0b25faW5hY3RpdmVcIik7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAvL0VzdGEgZnVuY2nDs24gY3JlYSB1bmEgbGlzdGEgZGUgdG9kb3MgbG9zIGlucHVzIHkgZGUgdG9kb3MgbG9zIGJvdG9uZXMuIEx1ZWdvIGl0ZXJhIHNvYnJlIGVzdG9zIGNhbXBvcyBsbGFtYW5kbyBhIGxhcyBmdW5jaW9uZXMgYW50ZXJpb3Jlc1xyXG5cclxuICAgIF9zZXRFdmVudExpc3RlbmVycyhmb3JtRWxlbWVudCkge1xyXG4gICAgICAgIGNvbnN0IGlucHV0TGlzdCA9IEFycmF5LmZyb20oXHJcbiAgICAgICAgICAgIGZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuZm9ybV9faW5wdXRcIilcclxuICAgICAgICApO1xyXG4gICAgICAgIGNvbnN0IGJ1dHRvbkVsZW1lbnQgPSBmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1fX3N1Ym1pdFwiKTtcclxuICAgICAgICBpbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgICAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZShpbnB1dExpc3QsIGJ1dHRvbkVsZW1lbnQpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvL0VzdGEgZnVuY2nDs24gbGxhbWEgYSBsYSBhbnRlcmlvclxyXG4gICAgZW5hYmxlVmFsaWRhdGlvbiA9ICgpID0+IHtcclxuICAgICAgICB0aGlzLl9hbGxGb3Jtcy5mb3JFYWNoKChmb3JtRWxlbWVudCkgPT4ge1xyXG4gICAgICAgICAgICBmb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIGZ1bmN0aW9uIChldnQpIHtcclxuICAgICAgICAgICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgY29uc3QgZmllbGRzZXRMaXN0ID0gQXJyYXkuZnJvbShkb2N1bWVudC5mb3Jtcyk7XHJcbiAgICAgICAgICAgIGZpZWxkc2V0TGlzdC5mb3JFYWNoKChmaWVsZHNldCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoZmllbGRzZXQpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IEZvcm1WYWxpZGF0b3I7XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcclxuICAgIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgICAgICAvL1JlY2liZSB1biBzZWxlY3RvciBwb3B1cFxyXG4gICAgICAgIHRoaXMuX3BvcHVwU2VsZWN0b3IgPSBwb3B1cFNlbGVjdG9yO1xyXG4gICAgICAgIHRoaXMuX3BvcHVwRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fcG9wdXBTZWxlY3Rvcik7XHJcbiAgICAgICAgdGhpcy5faGFuZGxlRXNjQ2xvc2UgPSB0aGlzLl9oYW5kbGVFc2NDbG9zZS5iaW5kKHRoaXMpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vTcOpdG9kbyBww7pibGljbyBwYXJhIGFicmlyIGVsIHBvcHVwIG8gbGEgaW1hZ2VuIHNlbGVjY2lvbmFkYVxyXG4gICAgb3BlbigpIHtcclxuICAgICAgICAvL0Ficmlyw6EgZWwgcG9wdXBcclxuICAgICAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcInBvcHVwX3Nob3dcIik7XHJcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vTcOpdG9kbyBww7pibGljbyBwYXJhIGNlcnJhciBlbCBwb3B1cCBvIGxhIGltYWdlbiBzZWxlY2Npb25hZGFcclxuICAgIGNsb3NlKCkge1xyXG4gICAgICAgIC8vQ2VycmFyIGVsIHBvcHVwXHJcbiAgICAgICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJwb3B1cF9zaG93XCIpO1xyXG4gICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICAgIH1cclxuXHJcbiAgICAvL03DqXRvZG8gcHJpdmFkbyBwYXJhIGNlcnJhciBlbCBwb3B1cCBhbCBwdWxzYXIgbGEgdGVjbGEgRXNjXHJcbiAgICBfaGFuZGxlRXNjQ2xvc2UgPSAoZXZ0KSA9PiB7XHJcbiAgICAgICAgaWYgKGV2dC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcclxuICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgLy9Nw6l0b2RvIHDDumJsaWNvIHBhcmEgYWdyZWdhciBldmVudG9zIGRlIGNsaWMgYWwgaWNvbm8gY2VycmFyIHkgZWwgw6FyZWEgc29tYnJlYWRhXHJcbiAgICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgICAgICBjb25zdCBjbG9zZUJ1dHRvbiA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICAgICAgICBcIi5wb3B1cF9fY2xvc2UtYnV0dG9uXCJcclxuICAgICAgICApO1xyXG4gICAgICAgIGNvbnN0IGFsbE92ZXJsYXkgPVxyXG4gICAgICAgICAgICB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5wb3B1cF9fb3ZlcmxheVwiKTtcclxuICAgICAgICAvLyBjb25zdCBwb3B1cFNob3cgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX3BvcHVwU2VsZWN0b3IpO1xyXG5cclxuICAgICAgICBjbG9zZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGFsbE92ZXJsYXkuZm9yRWFjaCgob3ZlcmxheSkgPT4ge1xyXG4gICAgICAgICAgICAvL0NlcnJhciBsYSBpbWFnZW4gcG9wdXAgYWwgZGFyIGNsaWMgZW4gZWwgT3ZlcmxheVxyXG4gICAgICAgICAgICBvdmVybGF5LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7IC8vQ2VycmFyIGFsIHByZXNpb25hciBsYSB0ZWNsYSBFc2NcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBzdWJtaUNhbGxiYWNrKSB7XHJcbiAgICAgICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcbiAgICAgICAgdGhpcy5fc3VibWl0QnV0dG9uID0gc3VibWlDYWxsYmFjaztcclxuICAgICAgICB0aGlzLl9mb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKS5xdWVyeVNlbGVjdG9yKFwiLmZvcm1cIik7XHJcbiAgICB9XHJcblxyXG4gICAgX2dldElucHV0VmFsdWVzKCkge1xyXG4gICAgICAgIC8vbcOpdG9kbyBwYXJhIGFsbWFjZW5hciBsb3MgdmFsb3JlcyBkZSB0b2RvcyBsb3MgY2FtcG9zIGRlIGVudHJhZGFcclxuICAgICAgICBjb25zdCB2YWx1ZXNJbXB1dCA9IHt9OyAvL09iamV0byBwYXJhIGFsbWFjZW5hciB0b2RvcyBsb3MgdmFsb3JlcyBkZSBsb3MgY2FtcG9zIGRlIGVudHJhZGFcclxuICAgICAgICBjb25zdCBhbGxJbnB1dCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvckFsbChcIi5mb3JtX19pbnB1dFwiKTtcclxuXHJcbiAgICAgICAgYWxsSW5wdXQuZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoaXRlbS5uYW1lKSB7XHJcbiAgICAgICAgICAgICAgICB2YWx1ZXNJbXB1dFtpdGVtLm5hbWVdID0gaXRlbS52YWx1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiB2YWx1ZXNJbXB1dDtcclxuICAgIH1cclxuICAgIGNsb3NlKCkge1xyXG4gICAgICAgIHRoaXMuX2Zvcm0ucmVzZXQoKTsgLy8gUmVpbmljaWFyIGVsIGZvcm11bGFyaW8gYWwgY2VycmFyIGVsIHBvcHVwXHJcbiAgICAgICAgc3VwZXIuY2xvc2UoKTtcclxuICAgIH1cclxuXHJcbiAgICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgICAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XHJcbiAgICAgICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICBjb25zdCBmb3JtRGF0YSA9IHRoaXMuX2dldElucHV0VmFsdWVzKCk7XHJcbiAgICAgICAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbihmb3JtRGF0YSk7XHJcbiAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgY29uc3QgY2xvc2VCdXR0b24gPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IodGhpcy5fY2xvc2VCdXRvblNlbGVjdG9yKTtcclxuICAgICAgICBpZiAoY2xvc2VCdXR0b24pIHtcclxuICAgICAgICAgICAgY2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldnQpID0+IHtcclxuICAgICAgICAgICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7Ly9Fc3RhIGNsYXNlIGxvIHF1ZSBub3MgcGVybWl0aXLDoSBlcyBxdWUgYWwgbW9tZW50byBkZSBkYXJsZSBjbGljayBhIHVuYSBkZSBsYXMgaW3DoWdlbmVzIGRlIG51ZXN0cmEgcMOhZ2luYSwgZXN0ZSBzZSBtb3N0cmFyw6EgZW4gbGEgdmVudGFuYSwgeSBhZGVtYXMgdGVuZHLDoSB1biBkZXNjcmlwY2nDs24gY29ydGEgZW4gbGEgcGFydGUgaW5mZXJpb3IgZGUgbGEgbWlzdG1hLlxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcclxuICAgIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgICAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIH1cclxuXHJcbiAgICBvcGVuKGxpbmssIG5hbWUpIHtcclxuICAgICAgICBjb25zdCBwb3B1cEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX3BvcHVwU2VsZWN0b3IpO1xyXG4gICAgICAgIHRoaXMuX2ltYWdlID0gcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcG9wdXBfX2ltYWdlXCIpO1xyXG4gICAgICAgIHRoaXMuX2Rlc2NyaXB0aW9uID0gcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX3RpdGxlXCIpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5faW1hZ2UgJiYgdGhpcy5fZGVzY3JpcHRpb24pIHtcclxuICAgICAgICAgICAgdGhpcy5faW1hZ2Uuc3JjID0gbGluaztcclxuICAgICAgICAgICAgdGhpcy5faW1hZ2UuYWx0ID0gbmFtZTtcclxuICAgICAgICAgICAgdGhpcy5fZGVzY3JpcHRpb24udGV4dENvbnRlbnQgPSBuYW1lO1xyXG4gICAgICAgICAgICBzdXBlci5vcGVuKCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgYWxlcnQoXCJFbGVtZW50byBkZSBpbWFnZW4gbyBkZXNjcmlwY2lvbiBubyBlbmNvbnRyYWRhc1wiKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7ICAgIC8vUmVjaWJlIGVsIG1hcmNhZG8gYXRyYXZleiBkZSB1bmEgZnVuY2nDsyBkZSBjYWxsYmFjayB5IGxvIGlzZXJ0YSBlbiBlbCBjb250ZW5lZG9yLlxyXG4gICAgY29uc3RydWN0b3IoeyBpdGVtcywgcmVuZGVyZXIgfSwgY2FyZFNlbGVjdG9yKSB7XHJcbiAgICAgICAgdGhpcy5faXRlbXMgPSBpdGVtczsgLy9BcnJheSBkZSBkYXRvc1xyXG4gICAgICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7IC8vRnVuY2nDs24gcmVzcG9zYWJsZSBkZSBjcmVhciB5IG1vc3RyYXIgbG9zIGRhdG9zIGVuIGxhIHDDoWdpbmFcclxuICAgICAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNhcmRTZWxlY3Rvcik7IC8vU2VsZWNjaW9uYSBsYSBjbGFzZSBkb25kZSB2YW4gbG9zIGVsZW1lbnRvIGRlIGxhIHRhcmpldGFcclxuICAgIH1cclxuXHJcbiAgICBjbGVhcigpIHtcclxuICAgICAgICB0aGlzLl9jb250YWluZXIuaW5uZXJIVE1MID0gXCJcIjtcclxuICAgIH1cclxuXHJcbiAgICBhZGRJdGVtKGVsZW1lbnQpIHtcclxuICAgICAgICAvL1RvbWEgdW4gZWxlbWVudG8gZGVsIERPTSB5IGxvIGFncmVnYSBhbCBjb250ZW5lclxyXG4gICAgICAgIHRoaXMuX2NvbnRhaW5lci5hcHBlbmQoZWxlbWVudCk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVuZGVyZXIoKSB7XHJcbiAgICAgICAgLy9SZW5kZXJpemEgY2FkYSB1bm8gZGUgbG9zIGVsZW1lbnRvcyBlbiBsYSBww6FnaW5hXHJcbiAgICAgICAgdGhpcy5jbGVhcigpO1xyXG4gICAgICAgIHRoaXMuX2l0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcclxuICAgICAgICAgICAgY29uc3QgY2FyZCA9IHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xyXG4gICAgICAgICAgICB0aGlzLmFkZEl0ZW0oY2FyZCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8geyAgICAvL0VzIGNhcGF6IGRlIHByZXNlbnRhciBpbmZvcm1hY2nDs24gc29icmUgZWwgdXN1YXJpbyBlbiBsYSBww6FnaW5hXHJcbiAgICBjb25zdHJ1Y3Rvcih7IG5hbWVTZWxlY3Rvciwgam9iU2VsZWN0b3IgfSkge1xyXG4gICAgICAgIHRoaXMuX25hbWVFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihuYW1lU2VsZWN0b3IpO1xyXG4gICAgICAgIHRoaXMuX2pvYkVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGpvYlNlbGVjdG9yKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBNw6l0b2RvIHDDumJsaWNvIHBhcmEgb2J0ZW5lciBpbmZvcm1hY2nDs24gc29icmUgZWwgdXN1YXJpb1xyXG4gICAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgbmFtZTogdGhpcy5fbmFtZUVsZW1lbnQudGV4dENvbnRlbnQsXHJcbiAgICAgICAgICAgIGpvYjogdGhpcy5fam9iRWxlbWVudC50ZXh0Q29udGVudCxcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIC8vIE3DqXRvZG8gcMO6YmxpY28gcGFyYSBlc3RhYmxlY2VyIGluZm9ybWFjacOzbiBzb2JyZSBlbCB1c3VhcmlvXHJcbiAgICBzZXRVc2VySW5mbyh7IG5hbWUsIGpvYiB9KSB7XHJcbiAgICAgICAgdGhpcy5fbmFtZUVsZW1lbnQudGV4dENvbnRlbnQgPSBuYW1lO1xyXG4gICAgICAgIHRoaXMuX2pvYkVsZW1lbnQudGV4dENvbnRlbnQgPSBqb2I7XHJcbiAgICB9XHJcbn1cclxuIiwiLyoqXHJcbiBUT0tFTiA6IDY3OGZiZDkyLWU2ZTQtNDA0NC1iMDQ3LTc0Y2UzMzRmZmQ0ZVxyXG4gR1JVUE86IHdlYl9lc18xMVxyXG4gVVJMIDogaHR0cHM6Ly9hcm91bmQubm9tb3JlcGFydGllcy5jby92MS93ZWJfZXNfMTEvY2FyZHNcclxuICovXHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBBcGkge1xyXG4gICAgY29uc3RydWN0b3IodXJsLCB0b2tlbikge1xyXG4gICAgICAgIHRoaXMudXJsID0gdXJsO1xyXG4gICAgICAgIHRoaXMudG9rZW4gPSB0b2tlbjtcclxuICAgIH07XHJcblxyXG5cclxuICAgIGdldEluaXRpYWxDYXJkKCkge1xyXG5cclxuICAgIH1cclxufVxyXG5cclxuXHJcbmNvbnN0IGFwaSA9IG5ldyBBcGkoe1xyXG4gICAgYmFzZVVybDogJ2h0dHBzOi8vYXJvdW5kLm5vbW9yZXBhcnRpZXMuY28vdjEvd2ViX2VzXzExL2NhcmRzJyxcclxuICAgIEhlYWRlcnM6IHtcclxuICAgICAgICBBdXRob3JpemF0aW9uOiBcIjY3OGZiZDkyLWU2ZTQtNDA0NC1iMDQ3LTc0Y2UzMzRmZmQ0ZVwiLFxyXG4gICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiXHJcbiAgICB9XHJcbn0pOyIsImNvbnN0IGFsbEZvcm1zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5mb3JtXCIpO1xyXG5jb25zdCBwb3B1cEZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwXCIpO1xyXG5jb25zdCBidXR0b25FZGlkUHJvZmlsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYnV0dG9uc19faXRlbV9pbmRleF9wcm9maWxlXCIpO1xyXG5jb25zdCBidXR0b25BZGRDYXJkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5idXR0b25zX19pdGVtX2luZGV4X2FkZC1jYXJkXCIpO1xyXG5jb25zdCBhbGxPdmVybGF5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5wb3B1cF9fb3ZlcmxheVwiKTtcclxuY29uc3QgYWxsSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmZvcm1fX2Vycm9yXCIpO1xyXG5jb25zdCBwb3B1cFByb2ZpbGUgPSBcIi5wb3B1cF9lZGl0LXByb2ZpbGVcIjtcclxuY29uc3QgcG9wdXBBZGRDYXJkID0gXCIucG9wdXBfY29udGVudC1hZGRjYXJkXCI7XHJcbmNvbnN0IHBvcHVwSW1hZ2UgPSBcIi5wb3B1cF9jb250ZW50LWltYWdlXCI7XHJcbmNvbnN0IHByb3B1cERlbGV0ZUNvZmlybWF0aW9uID0gXCIucG9wdXBfZGVsZXRlLWNhcmRcIjtcclxuY29uc3QgcG9wdXBFZGl0QXZhdGFyID0gXCIucG9wdXBfYXZhdGFyXCI7XHJcbmNvbnN0IGJ1dHRvbkNsb3NlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fY2xvc2UtYnV0dG9uXCIpO1xyXG5jb25zdCBidXR0b25MaWtlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkc19fZWxlbWVudF9pdGVtLWltYWdlblwiKTtcclxuY29uc3QgYnV0dG9uUmVjeWNsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZHNfX2VsZW1lbnRfdHJhc3RcIik7XHJcbmNvbnN0IGJ1dHRvbkVkaXRBdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmJ1dHRvbnNfX2VkaXRcIik7XHJcbmNvbnN0IGNhcmRUZW1wbGF0ZSA9IFwiI25ld0VsZW1lbnRcIjtcclxuY29uc3QgY2FyZHNBcmVhID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkc1wiKTtcclxuXHJcbi8vIGNvbnN0IGluaXRpYWxDYXJkcyA9IFtcclxuLy8gICAgIHtcclxuLy8gICAgICAgICBuYW1lOiBcIlZhbGxlIGRlIFlvc2VtaXRlXCIsXHJcbi8vICAgICAgICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL25ldy1tYXJrZXRzL1dFQl9zcHJpbnRfNS9FUy95b3NlbWl0ZS5qcGdcIixcclxuLy8gICAgICAgICBhbHQ6IFwiVmFsbGUgWW9zZW1pZSBWYWxsZXlcIixcclxuLy8gICAgIH0sXHJcbi8vICAgICB7XHJcbi8vICAgICAgICAgbmFtZTogXCJMYWdvIExvdWlzZVwiLFxyXG4vLyAgICAgICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9uZXctbWFya2V0cy9XRUJfc3ByaW50XzUvRVMvbGFrZS1sb3Vpc2UuanBnXCIsXHJcbi8vICAgICAgICAgYWx0OiBcIkxhZ28gTGFrZSBMb3Vpc2VcIixcclxuLy8gICAgIH0sXHJcbi8vICAgICB7XHJcbi8vICAgICAgICAgbmFtZTogXCJNb250YcOxYXMgQ2FsdmFzXCIsXHJcbi8vICAgICAgICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL25ldy1tYXJrZXRzL1dFQl9zcHJpbnRfNS9FUy9iYWxkLW1vdW50YWlucy5qcGdcIixcclxuLy8gICAgICAgICBhbHQ6IFwiQmFsZCBNb3VudGFpbnNcIixcclxuLy8gICAgIH0sXHJcbi8vICAgICB7XHJcbi8vICAgICAgICAgbmFtZTogXCJMYXRlbWFyXCIsXHJcbi8vICAgICAgICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL25ldy1tYXJrZXRzL1dFQl9zcHJpbnRfNS9FUy9sYXRlbWFyLmpwZ1wiLFxyXG4vLyAgICAgICAgIGFsdDogXCJMYXRlbWFyXCIsXHJcbi8vICAgICB9LFxyXG4vLyAgICAge1xyXG4vLyAgICAgICAgIG5hbWU6IFwiUGFycXVlIE5hY2lvbmFsIGRlIGxhIFZhbm9pc2VcIixcclxuLy8gICAgICAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vbmV3LW1hcmtldHMvV0VCX3NwcmludF81L0VTL3Zhbm9pc2UuanBnXCIsXHJcbi8vICAgICAgICAgYWx0OiBcIlZhbm9pc2UgTmF0aW9uYWxcIixcclxuLy8gICAgIH0sXHJcbi8vICAgICB7XHJcbi8vICAgICAgICAgbmFtZTogXCJMYWdvIGRpIEJyYWllc1wiLFxyXG4vLyAgICAgICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9uZXctbWFya2V0cy9XRUJfc3ByaW50XzUvRVMvbGFnby5qcGdcIixcclxuLy8gICAgICAgICBhbHQ6IFwiTGFnbyBkaSBCcmFpZXNcIixcclxuLy8gICAgIH0sXHJcbi8vIF07XHJcbmV4cG9ydCB7XHJcbiAgICBwb3B1cEltYWdlLFxyXG4gICAgcG9wdXBQcm9maWxlLFxyXG4gICAgYWxsRm9ybXMsXHJcbiAgICBwb3B1cEZvcm0sXHJcbiAgICBidXR0b25FZGlkUHJvZmlsZSxcclxuICAgIGJ1dHRvbkFkZENhcmQsXHJcbiAgICBhbGxPdmVybGF5LFxyXG4gICAgYWxsSW5wdXQsXHJcbiAgICBwb3B1cEFkZENhcmQsXHJcbiAgICBidXR0b25DbG9zZSxcclxuICAgIGJ1dHRvbkxpa2UsXHJcbiAgICBidXR0b25SZWN5Y2xlLFxyXG4gICAgY2FyZHNBcmVhLFxyXG4gICAgLy8gaW5pdGlhbENhcmRzLFxyXG4gICAgY2FyZFRlbXBsYXRlLFxyXG4gICAgcHJvcHVwRGVsZXRlQ29maXJtYXRpb24sXHJcbiAgICBwb3B1cEVkaXRBdmF0YXIsXHJcbiAgICBidXR0b25FZGl0QXZhdGFyLFxyXG59O1xyXG4iLCJpbXBvcnQgXCIuL3N0eWxlcy9pbmRleC5jc3NcIjtcblxuaW1wb3J0IHsgcmVzZXRGb3JtcyB9IGZyb20gXCIuL3V0aWxzL3V0aWxzLmpzXCI7XG5pbXBvcnQgQ2FyZCBmcm9tIFwiLi9jb21wb25lbnRzL0NhcmQuanNcIjtcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qc1wiO1xuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4vY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4vY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xuaW1wb3J0IEFwaSBmcm9tIFwiLi9jb21wb25lbnRzL0FwaXMuanNcIjtcbmltcG9ydCB7XG4gICAgcG9wdXBJbWFnZSxcbiAgICAvLyBpbml0aWFsQ2FyZHMsXG4gICAgYWxsRm9ybXMsXG4gICAgY2FyZFRlbXBsYXRlLFxuICAgIGJ1dHRvbkFkZENhcmQsXG4gICAgYnV0dG9uRWRpZFByb2ZpbGUsXG4gICAgcG9wdXBQcm9maWxlLFxuICAgIHBvcHVwQWRkQ2FyZCxcbiAgICBwcm9wdXBEZWxldGVDb2Zpcm1hdGlvbixcbiAgICBwb3B1cEVkaXRBdmF0YXIsXG4gICAgYnV0dG9uRWRpdEF2YXRhcixcbiAgICBidXR0b25SZWN5Y2xlXG59IGZyb20gXCIuL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xuXG4vL0NsYXNlIGVuY2FyZ2FkYSBkZSBtb3N0cmFyIGxhIGltYWdlbiBzZWxlY2Npb25hZGEgZW4gbGEgdmVudGFuYSBlbWVyZ2VudGVcbmNvbnN0IHBvcHV0SW1hZ2VuID0gbmV3IFBvcHVwV2l0aEltYWdlKHBvcHVwSW1hZ2UpO1xucG9wdXRJbWFnZW4uc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuLy9GdW5jacOzbiBwYXJhIGVkaXRhciBlbCBwZXJmaWwgZGVsXG5jb25zdCBoYW5kbGVDYXJkQ2xpY2sgPSAoZGF0YSkgPT4geyBwb3B1dEltYWdlbi5vcGVuKGRhdGEubGluaywgZGF0YS5uYW1lKSB9O1xuXG4vL0Z1bmNpw7NuIHBhcmEgY3JlYXIgdW5hIG51ZXZhIHRhcmpldGFcbmNvbnN0IGNyZWF0ZUNhcmRzID0gKGRhdGEpID0+IHtcbiAgICBjb25zdCBjYXJkc0ludGFuY2UgPSBuZXcgQ2FyZCh7XG4gICAgICAgIGRhdGEsIGhhbmRsZUNhcmRDbGljaywgaGFuZGxlRGVsZXRlQ2xpY2s6IChjYXJFbGVtZW50KSA9PiB7XG4gICAgICAgICAgICBjdXJyZW50Q2FyZCA9IGNhckVsZW1lbnQ7XG4gICAgICAgICAgICBwb3B1cERlbGV0ZUNvZmlybWF0aW9uLm9wZW4oY2FyRWxlbWVudCk7XG4gICAgICAgIH1cbiAgICB9LFxuICAgICAgICBjYXJkVGVtcGxhdGVcbiAgICApO1xuICAgIHJldHVybiBjYXJkc0ludGFuY2UuY3JlYXRlTmV3Q2FyZCgpO1xufTtcblxuZmV0Y2goXCJodHRwczovL2Fyb3VuZC5ub21vcmVwYXJ0aWVzLmNvL3YxL3dlYl9lc18xMS9jYXJkc1wiLCB7XG4gICAgbWV0aG9kOiBcIkdFVFwiLFxuICAgIGhlYWRlcnM6IHtcbiAgICAgICAgQXV0aG9yaXphdGlvbjogXCI2NzhmYmQ5Mi1lNmU0LTQwNDQtYjA0Ny03NGNlMzM0ZmZkNGVcIlxuICAgIH1cbn0pXG4gICAgLnRoZW4oKHJlcykgPT4gcmVzLmpzb24oKSlcbiAgICAudGhlbigoaW5pdGlhbENhcmRzKSA9PiB7XG5cblxuXG4gICAgICAgIGNvbnN0IG15U2VjdGlvbiA9IG5ldyBTZWN0aW9uKFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGl0ZW1zOiBpbml0aWFsQ2FyZHMsXG4gICAgICAgICAgICAgICAgcmVuZGVyZXI6IChpdGVtKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjcmVhdGVDYXJkcyhpdGVtKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFwiLmNhcmRzXCJcbiAgICAgICAgKTtcbiAgICAgICAgLy9DYXJnYSBsYXMgNiBUYXJqZXRhcyBwcmluY2lwYWxlcyBhbCBjYXJnYXJzZSBsYSBww6FnaW5hXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwibG9hZFwiLCAoKSA9PiBteVNlY3Rpb24ucmVuZGVyZXIoKSk7XG4gICAgfSlcbiAgICAuY2F0Y2goZXJyb3IgPT4ge1xuICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcbiAgICB9KTtcblxuLy8gLy9GdW5jacOzbiBwYXJhIGNyZWFyIHVuYSBudWV2YSB0YXJqZXRhXG4vLyBjb25zdCBjcmVhdGVDYXJkcyA9IChkYXRhKSA9PiB7XG4vLyAgICAgY29uc3QgY2FyZHNJbnRhbmNlID0gbmV3IENhcmQoe1xuLy8gICAgICAgICBkYXRhLCBoYW5kbGVDYXJkQ2xpY2ssXG4vLyAgICAgICAgIGhhbmRsZURlbGV0ZUNsaWNrOiAoY2FyRWxlbWVudCkgPT4ge1xuLy8gICAgICAgICAgICAgY3VycmVudENhcmQgPSBjYXJFbGVtZW50O1xuLy8gICAgICAgICAgICAgcG9wdXBEZWxldGVDb2Zpcm1hdGlvbi5vcGVuKGNhckVsZW1lbnQpO1xuLy8gICAgICAgICB9XG4vLyAgICAgfSxcbi8vICAgICAgICAgY2FyZFRlbXBsYXRlXG4vLyAgICAgKTtcbi8vICAgICByZXR1cm4gY2FyZHNJbnRhbmNlLmNyZWF0ZU5ld0NhcmQoKTtcbi8vIH07XG5cbi8vSW5zdGFuY2lhbW9zIGxhIGNsYXNlIHBhcmEgY3JlYXIgeSByZW5kZXJpemFyIGxhcyB0YXJqZXRhcyBkZWwgYXJyYXlcbi8vIGNvbnN0IG15U2VjdGlvbiA9IG5ldyBTZWN0aW9uKFxuLy8gICAgIHtcbi8vICAgICAgICAgaXRlbXM6IGluaXRpYWxDYXJkcyxcbi8vICAgICAgICAgcmVuZGVyZXI6IChpdGVtKSA9PiB7XG4vLyAgICAgICAgICAgICByZXR1cm4gY3JlYXRlQ2FyZHMoaXRlbSk7XG4vLyAgICAgICAgIH0sXG4vLyAgICAgfSxcbi8vICAgICBcIi5jYXJkc1wiXG4vLyApO1xuLy8gLy9DYXJnYSBsYXMgNiBUYXJqZXRhcyBwcmluY2lwYWxlcyBhbCBjYXJnYXJzZSBsYSBww6FnaW5hXG4vLyB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIiwgKCkgPT4gbXlTZWN0aW9uLnJlbmRlcmVyKCkpO1xuXG4vL0NsYXNlIHF1ZSBhbGFtY2VuYXLDoSBsb3MgZGF0b3MgZGVsIHVzdWFyaW9cbmNvbnN0IHVzZXJEYXRhID0gbmV3IFVzZXJJbmZvKHtcbiAgICBuYW1lU2VsZWN0b3I6IFwiLmJ1dHRvbnNfX25hbWVcIixcbiAgICBqb2JTZWxlY3RvcjogXCIuYnV0dG9uc19fZXhwbG9yZXJcIixcbn0pO1xuXG4vL0luc3RhbmNpYW1vcyB0b2RhcyBsYXMgY2xhc2VzIHBhcmEgbG9zIHBvcHVwXG5jb25zdCBwb3B1cEZvcm1FZGl0UHJvZmlsZSA9IG5ldyBQb3B1cFdpdGhGb3JtKHBvcHVwUHJvZmlsZSwgKGZvcm1EYXRhKSA9PiB7XG4gICAgdXNlckRhdGEuc2V0VXNlckluZm8oeyBuYW1lOiBmb3JtRGF0YS5uYW1lLCBqb2I6IGZvcm1EYXRhLmFjdGl2aXR5IH0pO1xuICAgIHBvcHVwRm9ybUVkaXRQcm9maWxlLmNsb3NlKCk7XG4gICAgcmVzZXRGb3JtcyhhbGxGb3Jtcyk7XG59KTtcbnBvcHVwRm9ybUVkaXRQcm9maWxlLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbi8vQ8OzZGlnbyBwYXJhIGJyaXIgZWwgcG9wdXAgZGUgZWRpdGFyIHBlcmZpbFxuYnV0dG9uRWRpZFByb2ZpbGUuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICBwb3B1cEZvcm1FZGl0UHJvZmlsZS5vcGVuKCk7XG59KTtcblxuLy9JbnN0YW5jaWEgZGUgcG9wdXBXaXRoRm9ybSBwYXJhIG1hbmVqYXIgZWwgZm9ybXVsYXJpbyBkZSBhw7FhZGlyIGxhIHRhcmpldGFcbmNvbnN0IHBvcHVwRm9ybUNvbnRlbnRBZGRDYXJkID0gbmV3IFBvcHVwV2l0aEZvcm0ocG9wdXBBZGRDYXJkLCAoZm9ybURhdGEpID0+IHtcbiAgICBjb25zdCBuZXdDYXJkID0gY3JlYXRlQ2FyZHMoe1xuICAgICAgICBuYW1lOiBmb3JtRGF0YS5uZXdwbGFjZSxcbiAgICAgICAgbGluazogZm9ybURhdGEuZW5sYWNlLFxuICAgIH0pO1xuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZHNcIikucHJlcGVuZChuZXdDYXJkKTtcbiAgICBwb3B1cEZvcm1Db250ZW50QWRkQ2FyZC5jbG9zZSgpO1xuICAgIHJlc2V0Rm9ybXMoYWxsRm9ybXMpO1xufSk7XG5wb3B1cEZvcm1Db250ZW50QWRkQ2FyZC5zZXRFdmVudExpc3RlbmVycygpO1xuXG4vL0NvZGlnbyBwYXJhIGFicmlsIGVsIGZvcm11bGFyaW8gZGUgYcOxYWRpciB0YXJqZXRhIGRhbmRvIGNsaWNrIGVuIHVuIGJvdG9uIGRlIGFicmlyIGVsIHBvcHVwXG5idXR0b25BZGRDYXJkLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgcG9wdXBGb3JtQ29udGVudEFkZENhcmQub3BlbigpO1xufSk7XG5cbmNvbnN0IHBvcHVwRm9ybUVkaXRBdmF0YXIgPSBuZXcgUG9wdXBXaXRoRm9ybShwb3B1cEVkaXRBdmF0YXIsIChmb3JtRGF0YSkgPT4ge1xufVxuKTtcbnBvcHVwRm9ybUVkaXRBdmF0YXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbmJ1dHRvbkVkaXRBdmF0YXIuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICBwb3B1cEZvcm1FZGl0QXZhdGFyLm9wZW4oKTtcbn0pO1xuXG5jb25zdCBwb3B1cEZvcm1EZWxldGVkQ29uZmlybWF0aW9uID0gbmV3IFBvcHVwV2l0aEZvcm0ocHJvcHVwRGVsZXRlQ29maXJtYXRpb24sIChmb3JtRGF0YSkgPT4ge1xufSk7XG5wb3B1cEZvcm1EZWxldGVkQ29uZmlybWF0aW9uLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbmJ1dHRvblJlY3ljbGUuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICBwb3B1cEZvcm1EZWxldGVkQ29uZmlybWF0aW9uLm9wZW4oKTtcbn0pO1xuXG4vL1ZhbGlkYWNpw7NuIGRlbCBmb3JtdWxhcmlvXG5jb25zdCBWYWxpZGF0aW9uID0gbmV3IEZvcm1WYWxpZGF0b3IoYWxsRm9ybXMpO1xuVmFsaWRhdGlvbi5lbmFibGVWYWxpZGF0aW9uKCk7XG4iXSwibmFtZXMiOlsicmVzZXRGb3JtcyIsImZvcm1zIiwiZm9yRWFjaCIsImZvcm0iLCJyZXNldCIsInF1ZXJ5U2VsZWN0b3IiLCJjbGFzc0xpc3QiLCJhZGQiLCJDYXJkIiwiX3JlZiIsImNhcmRTZWxlY3RvciIsImRhdGEiLCJoYW5kbGVDYXJkQ2xpY2siLCJfY2xhc3NDYWxsQ2hlY2siLCJ0aGlzIiwiX2xpbmsiLCJsaW5rIiwiX25hbWUiLCJuYW1lIiwiX2NhcmRTZWxlY3RvciIsIl9oYW5kbGVDYXJkQ2xpY2siLCJfbGlrZSIsImxpa2UiLCJrZXkiLCJ2YWx1ZSIsImRvY3VtZW50IiwiY29udGVudCIsImNsb25lTm9kZSIsIl9lbGVtZW50IiwiYWRkRXZlbnRMaXN0ZW5lciIsImV2ZW50IiwidGFyZ2V0IiwidG9nZ2xlIiwiX3RoaXMiLCJkZWxldGVDb25maXJtYXRpb24iLCJjb25maXJtIiwicmVtb3ZlIiwiY29uc29sZSIsImxvZyIsIl90aGlzMiIsIl90aGlzMyIsIl9oYW5kbGVMaWtlQW5kRGlzbGlrZSIsIl9oYW5kbGVSZW1vdmUiLCJfc2hvd0NhcmQiLCJfaW1hZ2VuRWxlbWVudCIsIl9nZXRUZW1wbGF0ZSIsInRleHRDb250ZW50Iiwic3JjIiwiYWx0IiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiRm9ybVZhbGlkYXRvciIsImFsbEZvcm1zIiwiX2RlZmluZVByb3BlcnR5IiwiaW5wdXRFbGVtZW50IiwiZXJyb3JNZXNzYWdlIiwiZXJyb3JFbGVtZW50IiwicGFyZW50RWxlbWVudCIsInZhbGlkaXR5IiwidmFsaWQiLCJfaGlkZUlucHV0RXJyb3IiLCJfc2hvd0lucHV0RXJyb3IiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsImlucHV0TGlzdCIsInNvbWUiLCJidXR0b25FbGVtZW50IiwiX2hhc0ludmFsaWRJbnB1dCIsIl9hbGxGb3JtcyIsImZvcm1FbGVtZW50IiwiZXZ0IiwicHJldmVudERlZmF1bHQiLCJBcnJheSIsImZyb20iLCJmaWVsZHNldCIsImVuYWJsZVZhbGlkYXRpb24iLCJxdWVyeVNlbGVjdG9yQWxsIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsIl90b2dnbGVCdXR0b25TdGF0ZSIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsImNsb3NlIiwiX3BvcHVwU2VsZWN0b3IiLCJfcG9wdXBFbGVtZW50IiwiX2hhbmRsZUVzY0Nsb3NlIiwiYmluZCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJjbG9zZUJ1dHRvbiIsImFsbE92ZXJsYXkiLCJvdmVybGF5IiwiUG9wdXBXaXRoRm9ybSIsIl9Qb3B1cCIsInN1Ym1pQ2FsbGJhY2siLCJfY2FsbFN1cGVyIiwiX3N1Ym1pdEJ1dHRvbiIsIl9mb3JtIiwiX2luaGVyaXRzIiwidmFsdWVzSW1wdXQiLCJpdGVtIiwiX2dldCIsIl9nZXRQcm90b3R5cGVPZiIsInByb3RvdHlwZSIsImNhbGwiLCJmb3JtRGF0YSIsIl9nZXRJbnB1dFZhbHVlcyIsIl9jbG9zZUJ1dG9uU2VsZWN0b3IiLCJQb3B1cFdpdGhJbWFnZSIsInBvcHVwRWxlbWVudCIsIl9pbWFnZSIsIl9kZXNjcmlwdGlvbiIsImFsZXJ0IiwiU2VjdGlvbiIsIml0ZW1zIiwicmVuZGVyZXIiLCJfaXRlbXMiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwiaW5uZXJIVE1MIiwiZWxlbWVudCIsImFwcGVuZCIsImNsZWFyIiwiY2FyZCIsImFkZEl0ZW0iLCJVc2VySW5mbyIsIm5hbWVTZWxlY3RvciIsImpvYlNlbGVjdG9yIiwiX25hbWVFbGVtZW50IiwiX2pvYkVsZW1lbnQiLCJqb2IiLCJfcmVmMiIsIkFwaSIsInVybCIsInRva2VuIiwiYmFzZVVybCIsIkhlYWRlcnMiLCJBdXRob3JpemF0aW9uIiwiYnV0dG9uRWRpZFByb2ZpbGUiLCJidXR0b25BZGRDYXJkIiwiYnV0dG9uUmVjeWNsZSIsImJ1dHRvbkVkaXRBdmF0YXIiLCJwb3B1dEltYWdlbiIsInNldEV2ZW50TGlzdGVuZXJzIiwib3BlbiIsImNyZWF0ZUNhcmRzIiwiaGFuZGxlRGVsZXRlQ2xpY2siLCJjYXJFbGVtZW50IiwiY3VycmVudENhcmQiLCJwb3B1cERlbGV0ZUNvZmlybWF0aW9uIiwiY3JlYXRlTmV3Q2FyZCIsImZldGNoIiwibWV0aG9kIiwiaGVhZGVycyIsInRoZW4iLCJyZXMiLCJqc29uIiwiaW5pdGlhbENhcmRzIiwibXlTZWN0aW9uIiwid2luZG93IiwiY2F0Y2giLCJlcnJvciIsInVzZXJEYXRhIiwicG9wdXBGb3JtRWRpdFByb2ZpbGUiLCJzZXRVc2VySW5mbyIsImFjdGl2aXR5IiwicG9wdXBGb3JtQ29udGVudEFkZENhcmQiLCJuZXdDYXJkIiwibmV3cGxhY2UiLCJlbmxhY2UiLCJwcmVwZW5kIiwicG9wdXBGb3JtRWRpdEF2YXRhciIsInBvcHVwRm9ybURlbGV0ZWRDb25maXJtYXRpb24iXSwic291cmNlUm9vdCI6IiJ9